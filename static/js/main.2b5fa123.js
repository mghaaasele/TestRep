/*! For license information please see main.2b5fa123.js.LICENSE.txt */
!function(){var e={374:function(e,t,r){"use strict";var n=r(791),i=Symbol.for("react.element"),o=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,a=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function u(e,t,r){var n,o={},u=null,l=null;for(n in void 0!==r&&(u=""+r),void 0!==t.key&&(u=""+t.key),void 0!==t.ref&&(l=t.ref),t)s.call(t,n)&&!c.hasOwnProperty(n)&&(o[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps)void 0===o[n]&&(o[n]=t[n]);return{$$typeof:i,type:e,key:u,ref:l,props:o,_owner:a.current}}},117:function(e,t){"use strict";var r=Symbol.for("react.element"),n=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),o=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),a=Symbol.for("react.provider"),c=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),f=Symbol.for("react.lazy"),d=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,y={};function b(e,t,r){this.props=e,this.context=t,this.refs=y,this.updater=r||p}function m(){}function g(e,t,r){this.props=e,this.context=t,this.refs=y,this.updater=r||p}b.prototype.isReactComponent={},b.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},b.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},m.prototype=b.prototype;var k=g.prototype=new m;k.constructor=g,v(k,b.prototype),k.isPureReactComponent=!0;var w=Array.isArray,_=Object.prototype.hasOwnProperty,x={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,n){var i,o={},s=null,a=null;if(null!=t)for(i in void 0!==t.ref&&(a=t.ref),void 0!==t.key&&(s=""+t.key),t)_.call(t,i)&&!S.hasOwnProperty(i)&&(o[i]=t[i]);var c=arguments.length-2;if(1===c)o.children=n;else if(1<c){for(var u=Array(c),l=0;l<c;l++)u[l]=arguments[l+2];o.children=u}if(e&&e.defaultProps)for(i in c=e.defaultProps)void 0===o[i]&&(o[i]=c[i]);return{$$typeof:r,type:e,key:s,ref:a,props:o,_owner:x.current}}function O(e){return"object"===typeof e&&null!==e&&e.$$typeof===r}var T=/\/+/g;function j(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,(function(e){return t[e]}))}(""+e.key):t.toString(36)}function P(e,t,i,o,s){var a=typeof e;"undefined"!==a&&"boolean"!==a||(e=null);var c=!1;if(null===e)c=!0;else switch(a){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case r:case n:c=!0}}if(c)return s=s(c=e),e=""===o?"."+j(c,0):o,w(s)?(i="",null!=e&&(i=e.replace(T,"$&/")+"/"),P(s,t,i,"",(function(e){return e}))):null!=s&&(O(s)&&(s=function(e,t){return{$$typeof:r,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(s,i+(!s.key||c&&c.key===s.key?"":(""+s.key).replace(T,"$&/")+"/")+e)),t.push(s)),1;if(c=0,o=""===o?".":o+":",w(e))for(var u=0;u<e.length;u++){var l=o+j(a=e[u],u);c+=P(a,t,i,l,s)}else if(l=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=d&&e[d]||e["@@iterator"])?e:null}(e),"function"===typeof l)for(e=l.call(e),u=0;!(a=e.next()).done;)c+=P(a=a.value,t,i,l=o+j(a,u++),s);else if("object"===a)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function R(e,t,r){if(null==e)return e;var n=[],i=0;return P(e,n,"","",(function(e){return t.call(r,e,i++)})),n}function A(e){if(-1===e._status){var t=e._result;(t=t()).then((function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)}),(function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)})),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var C={current:null},I={transition:null},L={ReactCurrentDispatcher:C,ReactCurrentBatchConfig:I,ReactCurrentOwner:x};t.Children={map:R,forEach:function(e,t,r){R(e,(function(){t.apply(this,arguments)}),r)},count:function(e){var t=0;return R(e,(function(){t++})),t},toArray:function(e){return R(e,(function(e){return e}))||[]},only:function(e){if(!O(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=b,t.Fragment=i,t.Profiler=s,t.PureComponent=g,t.StrictMode=o,t.Suspense=l,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=L,t.cloneElement=function(e,t,n){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=v({},e.props),o=e.key,s=e.ref,a=e._owner;if(null!=t){if(void 0!==t.ref&&(s=t.ref,a=x.current),void 0!==t.key&&(o=""+t.key),e.type&&e.type.defaultProps)var c=e.type.defaultProps;for(u in t)_.call(t,u)&&!S.hasOwnProperty(u)&&(i[u]=void 0===t[u]&&void 0!==c?c[u]:t[u])}var u=arguments.length-2;if(1===u)i.children=n;else if(1<u){c=Array(u);for(var l=0;l<u;l++)c[l]=arguments[l+2];i.children=c}return{$$typeof:r,type:e.type,key:o,ref:s,props:i,_owner:a}},t.createContext=function(e){return(e={$$typeof:c,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:a,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:u,render:e}},t.isValidElement=O,t.lazy=function(e){return{$$typeof:f,_payload:{_status:-1,_result:e},_init:A}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=I.transition;I.transition={};try{e()}finally{I.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return C.current.useCallback(e,t)},t.useContext=function(e){return C.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return C.current.useDeferredValue(e)},t.useEffect=function(e,t){return C.current.useEffect(e,t)},t.useId=function(){return C.current.useId()},t.useImperativeHandle=function(e,t,r){return C.current.useImperativeHandle(e,t,r)},t.useInsertionEffect=function(e,t){return C.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return C.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return C.current.useMemo(e,t)},t.useReducer=function(e,t,r){return C.current.useReducer(e,t,r)},t.useRef=function(e){return C.current.useRef(e)},t.useState=function(e){return C.current.useState(e)},t.useSyncExternalStore=function(e,t,r){return C.current.useSyncExternalStore(e,t,r)},t.useTransition=function(){return C.current.useTransition()},t.version="18.2.0"},791:function(e,t,r){"use strict";e.exports=r(117)},184:function(e,t,r){"use strict";r(374)},570:function(e,t){var r="undefined"!==typeof self?self:this,n=function(){function e(){this.fetch=!1,this.DOMException=r.DOMException}return e.prototype=r,new e}();!function(e){!function(t){var r={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};if(r.arrayBuffer)var n=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],i=ArrayBuffer.isView||function(e){return e&&n.indexOf(Object.prototype.toString.call(e))>-1};function o(e){if("string"!==typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function s(e){return"string"!==typeof e&&(e=String(e)),e}function a(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return r.iterable&&(t[Symbol.iterator]=function(){return t}),t}function c(e){this.map={},e instanceof c?e.forEach((function(e,t){this.append(t,e)}),this):Array.isArray(e)?e.forEach((function(e){this.append(e[0],e[1])}),this):e&&Object.getOwnPropertyNames(e).forEach((function(t){this.append(t,e[t])}),this)}function u(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function l(e){return new Promise((function(t,r){e.onload=function(){t(e.result)},e.onerror=function(){r(e.error)}}))}function h(e){var t=new FileReader,r=l(t);return t.readAsArrayBuffer(e),r}function f(e){if(e.slice)return e.slice(0);var t=new Uint8Array(e.byteLength);return t.set(new Uint8Array(e)),t.buffer}function d(){return this.bodyUsed=!1,this._initBody=function(e){var t;this._bodyInit=e,e?"string"===typeof e?this._bodyText=e:r.blob&&Blob.prototype.isPrototypeOf(e)?this._bodyBlob=e:r.formData&&FormData.prototype.isPrototypeOf(e)?this._bodyFormData=e:r.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)?this._bodyText=e.toString():r.arrayBuffer&&r.blob&&((t=e)&&DataView.prototype.isPrototypeOf(t))?(this._bodyArrayBuffer=f(e.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):r.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(e)||i(e))?this._bodyArrayBuffer=f(e):this._bodyText=e=Object.prototype.toString.call(e):this._bodyText="",this.headers.get("content-type")||("string"===typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):r.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},r.blob&&(this.blob=function(){var e=u(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?u(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(h)}),this.text=function(){var e=u(this);if(e)return e;if(this._bodyBlob)return function(e){var t=new FileReader,r=l(t);return t.readAsText(e),r}(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(function(e){for(var t=new Uint8Array(e),r=new Array(t.length),n=0;n<t.length;n++)r[n]=String.fromCharCode(t[n]);return r.join("")}(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},r.formData&&(this.formData=function(){return this.text().then(y)}),this.json=function(){return this.text().then(JSON.parse)},this}c.prototype.append=function(e,t){e=o(e),t=s(t);var r=this.map[e];this.map[e]=r?r+", "+t:t},c.prototype.delete=function(e){delete this.map[o(e)]},c.prototype.get=function(e){return e=o(e),this.has(e)?this.map[e]:null},c.prototype.has=function(e){return this.map.hasOwnProperty(o(e))},c.prototype.set=function(e,t){this.map[o(e)]=s(t)},c.prototype.forEach=function(e,t){for(var r in this.map)this.map.hasOwnProperty(r)&&e.call(t,this.map[r],r,this)},c.prototype.keys=function(){var e=[];return this.forEach((function(t,r){e.push(r)})),a(e)},c.prototype.values=function(){var e=[];return this.forEach((function(t){e.push(t)})),a(e)},c.prototype.entries=function(){var e=[];return this.forEach((function(t,r){e.push([r,t])})),a(e)},r.iterable&&(c.prototype[Symbol.iterator]=c.prototype.entries);var p=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function v(e,t){var r=(t=t||{}).body;if(e instanceof v){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new c(e.headers)),this.method=e.method,this.mode=e.mode,this.signal=e.signal,r||null==e._bodyInit||(r=e._bodyInit,e.bodyUsed=!0)}else this.url=String(e);if(this.credentials=t.credentials||this.credentials||"same-origin",!t.headers&&this.headers||(this.headers=new c(t.headers)),this.method=function(e){var t=e.toUpperCase();return p.indexOf(t)>-1?t:e}(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.signal=t.signal||this.signal,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&r)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(r)}function y(e){var t=new FormData;return e.trim().split("&").forEach((function(e){if(e){var r=e.split("="),n=r.shift().replace(/\+/g," "),i=r.join("=").replace(/\+/g," ");t.append(decodeURIComponent(n),decodeURIComponent(i))}})),t}function b(e){var t=new c;return e.replace(/\r?\n[\t ]+/g," ").split(/\r?\n/).forEach((function(e){var r=e.split(":"),n=r.shift().trim();if(n){var i=r.join(":").trim();t.append(n,i)}})),t}function m(e,t){t||(t={}),this.type="default",this.status=void 0===t.status?200:t.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in t?t.statusText:"OK",this.headers=new c(t.headers),this.url=t.url||"",this._initBody(e)}v.prototype.clone=function(){return new v(this,{body:this._bodyInit})},d.call(v.prototype),d.call(m.prototype),m.prototype.clone=function(){return new m(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new c(this.headers),url:this.url})},m.error=function(){var e=new m(null,{status:0,statusText:""});return e.type="error",e};var g=[301,302,303,307,308];m.redirect=function(e,t){if(-1===g.indexOf(t))throw new RangeError("Invalid status code");return new m(null,{status:t,headers:{location:e}})},t.DOMException=e.DOMException;try{new t.DOMException}catch(w){t.DOMException=function(e,t){this.message=e,this.name=t;var r=Error(e);this.stack=r.stack},t.DOMException.prototype=Object.create(Error.prototype),t.DOMException.prototype.constructor=t.DOMException}function k(e,n){return new Promise((function(i,o){var s=new v(e,n);if(s.signal&&s.signal.aborted)return o(new t.DOMException("Aborted","AbortError"));var a=new XMLHttpRequest;function c(){a.abort()}a.onload=function(){var e={status:a.status,statusText:a.statusText,headers:b(a.getAllResponseHeaders()||"")};e.url="responseURL"in a?a.responseURL:e.headers.get("X-Request-URL");var t="response"in a?a.response:a.responseText;i(new m(t,e))},a.onerror=function(){o(new TypeError("Network request failed"))},a.ontimeout=function(){o(new TypeError("Network request failed"))},a.onabort=function(){o(new t.DOMException("Aborted","AbortError"))},a.open(s.method,s.url,!0),"include"===s.credentials?a.withCredentials=!0:"omit"===s.credentials&&(a.withCredentials=!1),"responseType"in a&&r.blob&&(a.responseType="blob"),s.headers.forEach((function(e,t){a.setRequestHeader(t,e)})),s.signal&&(s.signal.addEventListener("abort",c),a.onreadystatechange=function(){4===a.readyState&&s.signal.removeEventListener("abort",c)}),a.send("undefined"===typeof s._bodyInit?null:s._bodyInit)}))}k.polyfill=!0,e.fetch||(e.fetch=k,e.Headers=c,e.Request=v,e.Response=m),t.Headers=c,t.Request=v,t.Response=m,t.fetch=k,Object.defineProperty(t,"__esModule",{value:!0})}({})}(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var i=n;(t=i.fetch).default=i.fetch,t.fetch=i.fetch,t.Headers=i.Headers,t.Request=i.Request,t.Response=i.Response,e.exports=t},213:function(e){var t=function(){if("object"===typeof self&&self)return self;if("object"===typeof window&&window)return window;throw new Error("Unable to resolve global `this`")};e.exports=function(){if(this)return this;if("object"===typeof globalThis&&globalThis)return globalThis;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch(e){return t()}try{return __global__||t()}finally{delete Object.prototype.__global__}}()},258:function(e,t,r){var n;if("object"===typeof globalThis)n=globalThis;else try{n=r(213)}catch(a){}finally{if(n||"undefined"===typeof window||(n=window),!n)throw new Error("Could not determine global this")}var i=n.WebSocket||n.MozWebSocket,o=r(616);function s(e,t){return t?new i(e,t):new i(e)}i&&["CONNECTING","OPEN","CLOSING","CLOSED"].forEach((function(e){Object.defineProperty(s,e,{get:function(){return i[e]}})})),e.exports={w3cwebsocket:i?s:null,version:o}},616:function(e,t,r){e.exports=r(232).version},232:function(e){"use strict";e.exports={version:"1.0.34"}}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var o=t[n]={exports:{}};return e[n].call(o.exports,o,o.exports,r),o.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},function(){var e,t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__};r.t=function(n,i){if(1&i&&(n=this(n)),8&i)return n;if("object"===typeof n&&n){if(4&i&&n.__esModule)return n;if(16&i&&"function"===typeof n.then)return n}var o=Object.create(null);r.r(o);var s={};e=e||[null,t({}),t([]),t(t)];for(var a=2&i&&n;"object"==typeof a&&!~e.indexOf(a);a=t(a))Object.getOwnPropertyNames(a).forEach((function(e){s[e]=function(){return n[e]}}));return s.default=function(){return n},r.d(o,s),o}}(),r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},function(){"use strict";r(791);function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(){t=function(){return r};var r={},n=Object.prototype,i=n.hasOwnProperty,o=Object.defineProperty||function(e,t,r){e[t]=r.value},s="function"==typeof Symbol?Symbol:{},a=s.iterator||"@@iterator",c=s.asyncIterator||"@@asyncIterator",u=s.toStringTag||"@@toStringTag";function l(e,t,r){return Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{l({},"")}catch(R){l=function(e,t,r){return e[t]=r}}function h(e,t,r,n){var i=t&&t.prototype instanceof p?t:p,s=Object.create(i.prototype),a=new T(n||[]);return o(s,"_invoke",{value:x(e,r,a)}),s}function f(e,t,r){try{return{type:"normal",arg:e.call(t,r)}}catch(R){return{type:"throw",arg:R}}}r.wrap=h;var d={};function p(){}function v(){}function y(){}var b={};l(b,a,(function(){return this}));var m=Object.getPrototypeOf,g=m&&m(m(j([])));g&&g!==n&&i.call(g,a)&&(b=g);var k=y.prototype=p.prototype=Object.create(b);function w(e){["next","throw","return"].forEach((function(t){l(e,t,(function(e){return this._invoke(t,e)}))}))}function _(t,r){function n(o,s,a,c){var u=f(t[o],t,s);if("throw"!==u.type){var l=u.arg,h=l.value;return h&&"object"==e(h)&&i.call(h,"__await")?r.resolve(h.__await).then((function(e){n("next",e,a,c)}),(function(e){n("throw",e,a,c)})):r.resolve(h).then((function(e){l.value=e,a(l)}),(function(e){return n("throw",e,a,c)}))}c(u.arg)}var s;o(this,"_invoke",{value:function(e,t){function i(){return new r((function(r,i){n(e,t,r,i)}))}return s=s?s.then(i,i):i()}})}function x(e,t,r){var n="suspendedStart";return function(i,o){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===i)throw o;return P()}for(r.method=i,r.arg=o;;){var s=r.delegate;if(s){var a=S(s,r);if(a){if(a===d)continue;return a}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=f(e,t,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===d)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function S(e,t){var r=t.method,n=e.iterator[r];if(void 0===n)return t.delegate=null,"throw"===r&&e.iterator.return&&(t.method="return",t.arg=void 0,S(e,t),"throw"===t.method)||"return"!==r&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+r+"' method")),d;var i=f(n,e.iterator,t.arg);if("throw"===i.type)return t.method="throw",t.arg=i.arg,t.delegate=null,d;var o=i.arg;return o?o.done?(t[e.resultName]=o.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,d):o:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,d)}function E(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function O(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(E,this),this.reset(!0)}function j(e){if(e){var t=e[a];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,n=function t(){for(;++r<e.length;)if(i.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return n.next=n}}return{next:P}}function P(){return{value:void 0,done:!0}}return v.prototype=y,o(k,"constructor",{value:y,configurable:!0}),o(y,"constructor",{value:v,configurable:!0}),v.displayName=l(y,u,"GeneratorFunction"),r.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===v||"GeneratorFunction"===(t.displayName||t.name))},r.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,l(e,u,"GeneratorFunction")),e.prototype=Object.create(k),e},r.awrap=function(e){return{__await:e}},w(_.prototype),l(_.prototype,c,(function(){return this})),r.AsyncIterator=_,r.async=function(e,t,n,i,o){void 0===o&&(o=Promise);var s=new _(h(e,t,n,i),o);return r.isGeneratorFunction(t)?s:s.next().then((function(e){return e.done?e.value:s.next()}))},w(k),l(k,u,"Generator"),l(k,a,(function(){return this})),l(k,"toString",(function(){return"[object Generator]"})),r.keys=function(e){var t=Object(e),r=[];for(var n in t)r.push(n);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},r.values=j,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(O),!e)for(var t in this)"t"===t.charAt(0)&&i.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(r,n){return s.type="throw",s.arg=e,t.next=r,n&&(t.method="next",t.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var a=i.call(o,"catchLoc"),c=i.call(o,"finallyLoc");if(a&&c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(a){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&i.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===e||"continue"===e)&&o.tryLoc<=t&&t<=o.finallyLoc&&(o=null);var s=o?o.completion:{};return s.type=e,s.arg=t,o?(this.method="next",this.next=o.finallyLoc,d):this.complete(s)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),d},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.finallyLoc===e)return this.complete(r.completion,r.afterLoc),O(r),d}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var r=this.tryEntries[t];if(r.tryLoc===e){var n=r.completion;if("throw"===n.type){var i=n.arg;O(r)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,r){return this.delegate={iterator:j(e),resultName:t,nextLoc:r},"next"===this.method&&(this.arg=void 0),d}},r}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(t){var r=function(t,r){if("object"!==e(t)||null===t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var i=n.call(t,r||"default");if("object"!==e(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===r?String:Number)(t)}(t,"string");return"symbol"===e(r)?r:String(r)}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,i(n.key),n)}}function s(e,t,r){return t&&o(e.prototype,t),r&&o(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}var a=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},c=function(e){var n;return n=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return a(void 0,void 0,void 0,t().mark((function e(){var i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(r.t.bind(r,570,23));case 2:return e.next=4,(i=e.sent).fetch.apply(i,n);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))}:fetch),function(){return n.apply(void 0,arguments)}};function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e,t){return l=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function h(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&l(e,t)}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function d(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function p(t){var r=d();return function(){var n,i=f(t);if(r){var o=f(this).constructor;n=Reflect.construct(i,arguments,o)}else n=i.apply(this,arguments);return function(t,r){if(r&&("object"===e(r)||"function"===typeof r))return r;if(void 0!==r)throw new TypeError("Derived constructors may only return object or undefined");return u(t)}(this,n)}}function v(e,t,r,n){return v="undefined"!==typeof Reflect&&Reflect.set?Reflect.set:function(e,t,r,n){var o,s=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=f(e)););return e}(e,t);if(s){if((o=Object.getOwnPropertyDescriptor(s,t)).set)return o.set.call(n,r),!0;if(!o.writable)return!1}if(o=Object.getOwnPropertyDescriptor(n,t)){if(!o.writable)return!1;o.value=r,Object.defineProperty(n,t,o)}else!function(e,t,r){(t=i(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r}(n,t,r);return!0},v(e,t,r,n)}function y(e,t,r){return y=d()?Reflect.construct.bind():function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&l(i,r.prototype),i},y.apply(null,arguments)}function b(e){var t="function"===typeof Map?new Map:void 0;return b=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!==typeof e)throw new TypeError("Super expression must either be null or a function");if("undefined"!==typeof t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return y(e,arguments,f(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),l(n,e)},b(e)}var m=function(e){h(r,e);var t=p(r);function r(e){var i,o,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"FunctionsError",a=arguments.length>2?arguments[2]:void 0;return n(this,r),function(e,t,r,n,i){if(!v(e,t,r,n||e)&&i)throw new TypeError("failed to set property")}((i=u(o=t.call(this,e)),f(r.prototype)),"name",s,i,!0),o.context=a,o}return s(r)}(b(Error)),g=function(e){h(r,e);var t=p(r);function r(e){return n(this,r),t.call(this,"Failed to send a request to the Edge Function","FunctionsFetchError",e)}return s(r)}(m),k=function(e){h(r,e);var t=p(r);function r(e){return n(this,r),t.call(this,"Relay Error invoking the Edge Function","FunctionsRelayError",e)}return s(r)}(m),w=function(e){h(r,e);var t=p(r);function r(e){return n(this,r),t.call(this,"Edge Function returned a non-2xx status code","FunctionsHttpError",e)}return s(r)}(m),_=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},x=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.headers,o=void 0===i?{}:i,s=r.customFetch;n(this,e),this.url=t,this.headers=o,this.fetch=c(s)}return s(e,[{key:"setAuth",value:function(e){this.headers.Authorization="Bearer ".concat(e)}},{key:"invoke",value:function(e){var r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _(this,void 0,void 0,t().mark((function i(){var o,s,a,c,u,l,h,f;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,o=n.headers,s=n.body,a={},s&&(o&&!Object.prototype.hasOwnProperty.call(o,"Content-Type")||!o)&&("undefined"!==typeof Blob&&s instanceof Blob||s instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",c=s):"string"===typeof s?(a["Content-Type"]="text/plain",c=s):"undefined"!==typeof FormData&&s instanceof FormData?c=s:(a["Content-Type"]="application/json",c=JSON.stringify(s))),t.next=6,this.fetch("".concat(this.url,"/").concat(e),{method:"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),o),body:c}).catch((function(e){throw new g(e)}));case 6:if(u=t.sent,!(l=u.headers.get("x-relay-error"))||"true"!==l){t.next=10;break}throw new k(u);case 10:if(u.ok){t.next=12;break}throw new w(u);case 12:if("application/json"!==(h=(null!==(r=u.headers.get("Content-Type"))&&void 0!==r?r:"text/plain").split(";")[0].trim())){t.next=19;break}return t.next=16,u.json();case 16:f=t.sent,t.next=34;break;case 19:if("application/octet-stream"!==h){t.next=25;break}return t.next=22,u.blob();case 22:f=t.sent,t.next=34;break;case 25:if("multipart/form-data"!==h){t.next=31;break}return t.next=28,u.formData();case 28:f=t.sent,t.next=34;break;case 31:return t.next=33,u.text();case 33:f=t.sent;case 34:return t.abrupt("return",{data:f,error:null});case 37:return t.prev=37,t.t0=t.catch(0),t.abrupt("return",{data:null,error:t.t0});case 40:case"end":return t.stop()}}),i,this,[[0,37]])})))}}]),e}();function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function E(e,t){if(e){if("string"===typeof e)return S(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?S(e,t):void 0}}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,o,s,a=[],c=!0,u=!1;try{if(o=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=o.call(r)).done)&&(a.push(n.value),a.length!==t);c=!0);}catch(l){u=!0,i=l}finally{try{if(!c&&null!=r.return&&(s=r.return(),Object(s)!==s))return}finally{if(u)throw i}}return a}}(e,t)||E(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e){return function(e){if(Array.isArray(e))return S(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||E(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t,r,n,i,o,s){try{var a=e[o](s),c=a.value}catch(u){return void r(u)}a.done?t(c):Promise.resolve(c).then(n,i)}var P,R,A,C,I,L=r(570),U=r.n(L),D=function(){function e(t){n(this,e),this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.allowEmpty=t.allowEmpty,t.fetch?this.fetch=t.fetch:"undefined"===typeof fetch?this.fetch=U():this.fetch=fetch}return s(e,[{key:"throwOnError",value:function(){return this.shouldThrowOnError=!0,this}},{key:"then",value:function(e,r){var n=this;void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");var i=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(function(){var e,r=(e=t().mark((function e(r){var i,o,s,a,c,u,l,h,f,d,p,v,y;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=null,c=null,u=null,l=r.status,h=r.statusText,!r.ok){e.next=16;break}if("HEAD"===n.method){e.next=11;break}return e.next=9,r.text();case 9:""===(f=e.sent)||(c="text/csv"===n.headers.Accept||n.headers.Accept&&n.headers.Accept.includes("application/vnd.pgrst.plan+text")?f:JSON.parse(f));case 11:d=null===(i=n.headers.Prefer)||void 0===i?void 0:i.match(/count=(exact|planned|estimated)/),p=null===(o=r.headers.get("content-range"))||void 0===o?void 0:o.split("/"),d&&p&&p.length>1&&(u=parseInt(p[1])),e.next=23;break;case 16:return e.next=18,r.text();case 18:v=e.sent;try{a=JSON.parse(v),Array.isArray(a)&&404===r.status&&(c=[],a=null,l=200,h="OK")}catch(t){404===r.status&&""===v?(l=204,h="No Content"):a={message:v}}if(a&&n.allowEmpty&&(null===(s=null===a||void 0===a?void 0:a.details)||void 0===s?void 0:s.includes("Results contain 0 rows"))&&(a=null,l=200,h="OK"),!a||!n.shouldThrowOnError){e.next=23;break}throw a;case 23:return y={error:a,data:c,count:u,status:l,statusText:h},e.abrupt("return",y);case 25:case"end":return e.stop()}}),e)})),function(){var t=this,r=arguments;return new Promise((function(n,i){var o=e.apply(t,r);function s(e){j(o,n,i,s,a,"next",e)}function a(e){j(o,n,i,s,a,"throw",e)}s(void 0)}))});return function(e){return r.apply(this,arguments)}}());return this.shouldThrowOnError||(i=i.catch((function(e){return{error:{message:"FetchError: ".concat(e.message),details:"",hint:"",code:e.code||""},data:null,count:null,status:0,statusText:""}}))),i.then(e,r)}}]),e}(),N=function(e){h(r,e);var t=p(r);function r(){return n(this,r),t.apply(this,arguments)}return s(r,[{key:"select",value:function(e){var t=!1,r=(null!==e&&void 0!==e?e:"*").split("").map((function(e){return/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)})).join("");return this.url.searchParams.set("select",r),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}},{key:"order",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.ascending,n=void 0===r||r,i=t.nullsFirst,o=t.foreignTable,s=o?"".concat(o,".order"):"order",a=this.url.searchParams.get(s);return this.url.searchParams.set(s,"".concat(a?"".concat(a,","):"").concat(e,".").concat(n?"asc":"desc").concat(void 0===i?"":i?".nullsfirst":".nullslast")),this}},{key:"limit",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).foreignTable,r="undefined"===typeof t?"limit":"".concat(t,".limit");return this.url.searchParams.set(r,"".concat(e)),this}},{key:"range",value:function(e,t){var r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).foreignTable,n="undefined"===typeof r?"offset":"".concat(r,".offset"),i="undefined"===typeof r?"limit":"".concat(r,".limit");return this.url.searchParams.set(n,"".concat(e)),this.url.searchParams.set(i,"".concat(t-e+1)),this}},{key:"abortSignal",value:function(e){return this.signal=e,this}},{key:"single",value:function(){return this.headers.Accept="application/vnd.pgrst.object+json",this}},{key:"maybeSingle",value:function(){return this.headers.Accept="application/vnd.pgrst.object+json",this.allowEmpty=!0,this}},{key:"csv",value:function(){return this.headers.Accept="text/csv",this}},{key:"geojson",value:function(){return this.headers.Accept="application/geo+json",this}},{key:"explain",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.analyze,r=void 0!==t&&t,n=e.verbose,i=void 0!==n&&n,o=e.settings,s=void 0!==o&&o,a=e.buffers,c=void 0!==a&&a,u=e.wal,l=void 0!==u&&u,h=e.format,f=void 0===h?"text":h,d=[r?"analyze":null,i?"verbose":null,s?"settings":null,c?"buffers":null,l?"wal":null].filter(Boolean).join("|"),p=this.headers.Accept;return this.headers.Accept="application/vnd.pgrst.plan+".concat(f,'; for="').concat(p,'"; options=').concat(d,";"),this}},{key:"rollback",value:function(){var e;return(null!==(e=this.headers.Prefer)&&void 0!==e?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}},{key:"returns",value:function(){return this}}]),r}(D),B=function(e){h(r,e);var t=p(r);function r(){return n(this,r),t.apply(this,arguments)}return s(r,[{key:"eq",value:function(e,t){return this.url.searchParams.append(e,"eq.".concat(t)),this}},{key:"neq",value:function(e,t){return this.url.searchParams.append(e,"neq.".concat(t)),this}},{key:"gt",value:function(e,t){return this.url.searchParams.append(e,"gt.".concat(t)),this}},{key:"gte",value:function(e,t){return this.url.searchParams.append(e,"gte.".concat(t)),this}},{key:"lt",value:function(e,t){return this.url.searchParams.append(e,"lt.".concat(t)),this}},{key:"lte",value:function(e,t){return this.url.searchParams.append(e,"lte.".concat(t)),this}},{key:"like",value:function(e,t){return this.url.searchParams.append(e,"like.".concat(t)),this}},{key:"ilike",value:function(e,t){return this.url.searchParams.append(e,"ilike.".concat(t)),this}},{key:"is",value:function(e,t){return this.url.searchParams.append(e,"is.".concat(t)),this}},{key:"in",value:function(e,t){var r=t.map((function(e){return"string"===typeof e&&new RegExp("[,()]").test(e)?'"'.concat(e,'"'):"".concat(e)})).join(",");return this.url.searchParams.append(e,"in.(".concat(r,")")),this}},{key:"contains",value:function(e,t){return"string"===typeof t?this.url.searchParams.append(e,"cs.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cs.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cs.".concat(JSON.stringify(t))),this}},{key:"containedBy",value:function(e,t){return"string"===typeof t?this.url.searchParams.append(e,"cd.".concat(t)):Array.isArray(t)?this.url.searchParams.append(e,"cd.{".concat(t.join(","),"}")):this.url.searchParams.append(e,"cd.".concat(JSON.stringify(t))),this}},{key:"rangeGt",value:function(e,t){return this.url.searchParams.append(e,"sr.".concat(t)),this}},{key:"rangeGte",value:function(e,t){return this.url.searchParams.append(e,"nxl.".concat(t)),this}},{key:"rangeLt",value:function(e,t){return this.url.searchParams.append(e,"sl.".concat(t)),this}},{key:"rangeLte",value:function(e,t){return this.url.searchParams.append(e,"nxr.".concat(t)),this}},{key:"rangeAdjacent",value:function(e,t){return this.url.searchParams.append(e,"adj.".concat(t)),this}},{key:"overlaps",value:function(e,t){return"string"===typeof t?this.url.searchParams.append(e,"ov.".concat(t)):this.url.searchParams.append(e,"ov.{".concat(t.join(","),"}")),this}},{key:"textSearch",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.config,i=r.type,o="";"plain"===i?o="pl":"phrase"===i?o="ph":"websearch"===i&&(o="w");var s=void 0===n?"":"(".concat(n,")");return this.url.searchParams.append(e,"".concat(o,"fts").concat(s,".").concat(t)),this}},{key:"match",value:function(e){var t=this;return Object.entries(e).forEach((function(e){var r=O(e,2),n=r[0],i=r[1];t.url.searchParams.append(n,"eq.".concat(i))})),this}},{key:"not",value:function(e,t,r){return this.url.searchParams.append(e,"not.".concat(t,".").concat(r)),this}},{key:"or",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).foreignTable,r=t?"".concat(t,".or"):"or";return this.url.searchParams.append(r,"(".concat(e,")")),this}},{key:"filter",value:function(e,t,r){return this.url.searchParams.append(e,"".concat(t,".").concat(r)),this}}]),r}(N),F=function(){function e(t,r){var i=r.headers,o=void 0===i?{}:i,s=r.schema,a=r.fetch;n(this,e),this.url=t,this.headers=o,this.schema=s,this.fetch=a}return s(e,[{key:"select",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.head,n=void 0!==r&&r,i=t.count,o=n?"HEAD":"GET",s=!1,a=(null!==e&&void 0!==e?e:"*").split("").map((function(e){return/\s/.test(e)&&!s?"":('"'===e&&(s=!s),e)})).join("");return this.url.searchParams.set("select",a),i&&(this.headers.Prefer="count=".concat(i)),new B({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}},{key:"insert",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).count,r=[],n=e;if(t&&r.push("count=".concat(t)),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),Array.isArray(e)){var i=e.reduce((function(e,t){return e.concat(Object.keys(t))}),[]);if(i.length>0){var o=T(new Set(i)).map((function(e){return'"'.concat(e,'"')}));this.url.searchParams.set("columns",o.join(","))}}return new B({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:this.fetch,allowEmpty:!1})}},{key:"upsert",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=t.onConflict,n=t.ignoreDuplicates,i=void 0!==n&&n,o=t.count,s=["resolution=".concat(i?"ignore":"merge","-duplicates")];void 0!==r&&this.url.searchParams.set("on_conflict",r);var a=e;return o&&s.push("count=".concat(o)),this.headers.Prefer&&s.unshift(this.headers.Prefer),this.headers.Prefer=s.join(","),new B({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:a,fetch:this.fetch,allowEmpty:!1})}},{key:"update",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).count,r=[],n=e;return t&&r.push("count=".concat(t)),this.headers.Prefer&&r.unshift(this.headers.Prefer),this.headers.Prefer=r.join(","),new B({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:n,fetch:this.fetch,allowEmpty:!1})}},{key:"delete",value:function(){var e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).count,t=[];return e&&t.push("count=".concat(e)),this.headers.Prefer&&t.unshift(this.headers.Prefer),this.headers.Prefer=t.join(","),new B({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}}]),e}(),M={"X-Client-Info":"postgrest-js/".concat("1.4.0")},J=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=r.headers,o=void 0===i?{}:i,s=r.schema,a=r.fetch;n(this,e),this.url=t,this.headers=Object.assign(Object.assign({},M),o),this.schema=s,this.fetch=a}return s(e,[{key:"from",value:function(e){var t=new URL("".concat(this.url,"/").concat(e));return new F(t,{headers:Object.assign({},this.headers),schema:this.schema,fetch:this.fetch})}},{key:"rpc",value:function(e){var t,r,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=i.head,s=void 0!==o&&o,a=i.count,c=new URL("".concat(this.url,"/rpc/").concat(e));s?(t="HEAD",Object.entries(n).forEach((function(e){var t=O(e,2),r=t[0],n=t[1];c.searchParams.append(r,"".concat(n))}))):(t="POST",r=n);var u=Object.assign({},this.headers);return a&&(u.Prefer="count=".concat(a)),new B({method:t,url:c,headers:u,schema:this.schema,body:r,fetch:this.fetch,allowEmpty:!1})}}]),e}(),H=r(258),G={"X-Client-Info":"realtime-js/".concat("2.6.0")},z=1e4;!function(e){e[e.connecting=0]="connecting",e[e.open=1]="open",e[e.closing=2]="closing",e[e.closed=3]="closed"}(P||(P={})),function(e){e.closed="closed",e.errored="errored",e.joined="joined",e.joining="joining",e.leaving="leaving"}(R||(R={})),function(e){e.close="phx_close",e.error="phx_error",e.join="phx_join",e.reply="phx_reply",e.leave="phx_leave",e.access_token="access_token"}(A||(A={})),function(e){e.websocket="websocket"}(C||(C={})),function(e){e.Connecting="connecting",e.Open="open",e.Closing="closing",e.Closed="closed"}(I||(I={}));var q,K=function(){function e(t,r){n(this,e),this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}return s(e,[{key:"reset",value:function(){this.tries=0,clearTimeout(this.timer)}},{key:"scheduleTimeout",value:function(){var e=this;clearTimeout(this.timer),this.timer=setTimeout((function(){e.tries=e.tries+1,e.callback()}),this.timerCalc(this.tries+1))}}]),e}(),$=function(){function e(){n(this,e),this.HEADER_LENGTH=1}return s(e,[{key:"decode",value:function(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"===typeof e?JSON.parse(e):{})}},{key:"_binaryDecode",value:function(e){var t=new DataView(e),r=new TextDecoder;return this._decodeBroadcast(e,t,r)}},{key:"_decodeBroadcast",value:function(e,t,r){var n=t.getUint8(1),i=t.getUint8(2),o=this.HEADER_LENGTH+2,s=r.decode(e.slice(o,o+n));o+=n;var a=r.decode(e.slice(o,o+i));return o+=i,{ref:null,topic:s,event:a,payload:JSON.parse(r.decode(e.slice(o,e.byteLength)))}}}]),e}(),V=function(){function e(t,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:z;n(this,e),this.channel=t,this.event=r,this.payload=i,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null,this.rateLimited=!1}return s(e,[{key:"resend",value:function(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}},{key:"send",value:function(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,"rate limited"===this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()})&&(this.rateLimited=!0))}},{key:"updatePayload",value:function(e){this.payload=Object.assign(Object.assign({},this.payload),e)}},{key:"receive",value:function(e,t){var r;return this._hasReceived(e)&&t(null===(r=this.receivedResp)||void 0===r?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}},{key:"startTimeout",value:function(){var e=this;if(!this.timeoutTimer){this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},(function(t){e._cancelRefEvent(),e._cancelTimeout(),e.receivedResp=t,e._matchReceive(t)})),this.timeoutTimer=setTimeout((function(){e.trigger("timeout",{})}),this.timeout)}}},{key:"trigger",value:function(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}},{key:"destroy",value:function(){this._cancelRefEvent(),this._cancelTimeout()}},{key:"_cancelRefEvent",value:function(){this.refEvent&&this.channel._off(this.refEvent,{})}},{key:"_cancelTimeout",value:function(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}},{key:"_matchReceive",value:function(e){var t=e.status,r=e.response;this.recHooks.filter((function(e){return e.status===t})).forEach((function(e){return e.callback(r)}))}},{key:"_hasReceived",value:function(e){return this.receivedResp&&this.receivedResp.status===e}}]),e}();!function(e){e.SYNC="sync",e.JOIN="join",e.LEAVE="leave"}(q||(q={}));var W,Y=function(){function e(t,r){var i=this;n(this,e),this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:function(){},onLeave:function(){},onSync:function(){}};var o=(null===r||void 0===r?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(o.state,{},(function(t){var r=i.caller,n=r.onJoin,o=r.onLeave,s=r.onSync;i.joinRef=i.channel._joinRef(),i.state=e.syncState(i.state,t,n,o),i.pendingDiffs.forEach((function(t){i.state=e.syncDiff(i.state,t,n,o)})),i.pendingDiffs=[],s()})),this.channel._on(o.diff,{},(function(t){var r=i.caller,n=r.onJoin,o=r.onLeave,s=r.onSync;i.inPendingSyncState()?i.pendingDiffs.push(t):(i.state=e.syncDiff(i.state,t,n,o),s())})),this.onJoin((function(e,t,r){i.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:r})})),this.onLeave((function(e,t,r){i.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:r})})),this.onSync((function(){i.channel._trigger("presence",{event:"sync"})}))}return s(e,[{key:"onJoin",value:function(e){this.caller.onJoin=e}},{key:"onLeave",value:function(e){this.caller.onLeave=e}},{key:"onSync",value:function(e){this.caller.onSync=e}},{key:"inPendingSyncState",value:function(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}],[{key:"syncState",value:function(e,t,r,n){var i=this.cloneDeep(e),o=this.transformState(t),s={},a={};return this.map(i,(function(e,t){o[e]||(a[e]=t)})),this.map(o,(function(e,t){var r=i[e];if(r){var n=t.map((function(e){return e.presence_ref})),o=r.map((function(e){return e.presence_ref})),c=t.filter((function(e){return o.indexOf(e.presence_ref)<0})),u=r.filter((function(e){return n.indexOf(e.presence_ref)<0}));c.length>0&&(s[e]=c),u.length>0&&(a[e]=u)}else s[e]=t})),this.syncDiff(i,{joins:s,leaves:a},r,n)}},{key:"syncDiff",value:function(e,t,r,n){var i=this,o={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)},s=o.joins,a=o.leaves;return r||(r=function(){}),n||(n=function(){}),this.map(s,(function(t,n){var o,s=null!==(o=e[t])&&void 0!==o?o:[];if(e[t]=i.cloneDeep(n),s.length>0){var a,c=e[t].map((function(e){return e.presence_ref})),u=s.filter((function(e){return c.indexOf(e.presence_ref)<0}));(a=e[t]).unshift.apply(a,T(u))}r(t,s,n)})),this.map(a,(function(t,r){var i=e[t];if(i){var o=r.map((function(e){return e.presence_ref}));i=i.filter((function(e){return o.indexOf(e.presence_ref)<0})),e[t]=i,n(t,i,r),0===i.length&&delete e[t]}})),e}},{key:"map",value:function(e,t){return Object.getOwnPropertyNames(e).map((function(r){return t(r,e[r])}))}},{key:"transformState",value:function(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((function(t,r){var n=e[r];return t[r]="metas"in n?n.metas.map((function(e){return e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e})):n,t}),{})}},{key:"cloneDeep",value:function(e){return JSON.parse(JSON.stringify(e))}}]),e}();!function(e){e.abstime="abstime",e.bool="bool",e.date="date",e.daterange="daterange",e.float4="float4",e.float8="float8",e.int2="int2",e.int4="int4",e.int4range="int4range",e.int8="int8",e.int8range="int8range",e.json="json",e.jsonb="jsonb",e.money="money",e.numeric="numeric",e.oid="oid",e.reltime="reltime",e.text="text",e.time="time",e.timestamp="timestamp",e.timestamptz="timestamptz",e.timetz="timetz",e.tsrange="tsrange",e.tstzrange="tstzrange"}(W||(W={}));var X,Q,Z,ee=function(e,t){var r,n=null!==(r=(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{}).skipTypes)&&void 0!==r?r:[];return Object.keys(t).reduce((function(r,i){return r[i]=te(i,e,t,n),r}),{})},te=function(e,t,r,n){var i=t.find((function(t){return t.name===e})),o=null===i||void 0===i?void 0:i.type,s=r[e];return o&&!n.includes(o)?re(o,s):ne(s)},re=function(e,t){if("_"===e.charAt(0)){var r=e.slice(1,e.length);return ae(t,r)}switch(e){case W.bool:return ie(t);case W.float4:case W.float8:case W.int2:case W.int4:case W.int8:case W.numeric:case W.oid:return oe(t);case W.json:case W.jsonb:return se(t);case W.timestamp:return ce(t);case W.abstime:case W.date:case W.daterange:case W.int4range:case W.int8range:case W.money:case W.reltime:case W.text:case W.time:case W.timestamptz:case W.timetz:case W.tsrange:case W.tstzrange:default:return ne(t)}},ne=function(e){return e},ie=function(e){switch(e){case"t":return!0;case"f":return!1;default:return e}},oe=function(e){if("string"===typeof e){var t=parseFloat(e);if(!Number.isNaN(t))return t}return e},se=function(e){if("string"===typeof e)try{return JSON.parse(e)}catch(t){return console.log("JSON parse error: ".concat(t)),e}return e},ae=function(e,t){if("string"!==typeof e)return e;var r=e.length-1,n=e[r];if("{"===e[0]&&"}"===n){var i,o=e.slice(1,r);try{i=JSON.parse("["+o+"]")}catch(s){i=o?o.split(","):[]}return i.map((function(e){return re(t,e)}))}return e},ce=function(e){return"string"===typeof e?e.replace(" ","T"):e},ue=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};!function(e){e.ALL="*",e.INSERT="INSERT",e.UPDATE="UPDATE",e.DELETE="DELETE"}(X||(X={})),function(e){e.BROADCAST="broadcast",e.PRESENCE="presence",e.POSTGRES_CHANGES="postgres_changes"}(Q||(Q={})),function(e){e.SUBSCRIBED="SUBSCRIBED",e.TIMED_OUT="TIMED_OUT",e.CLOSED="CLOSED",e.CHANNEL_ERROR="CHANNEL_ERROR"}(Z||(Z={}));var le=function(){function e(t){var r=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}},o=arguments.length>2?arguments[2]:void 0;n(this,e),this.topic=t,this.params=i,this.socket=o,this.bindings={},this.state=R.closed,this.joinedOnce=!1,this.pushBuffer=[],this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""}},i.config),this.timeout=this.socket.timeout,this.joinPush=new V(this,A.join,this.params,this.timeout),this.rejoinTimer=new K((function(){return r._rejoinUntilConnected()}),this.socket.reconnectAfterMs),this.joinPush.receive("ok",(function(){r.state=R.joined,r.rejoinTimer.reset(),r.pushBuffer.forEach((function(e){return e.send()})),r.pushBuffer=[]})),this._onClose((function(){r.rejoinTimer.reset(),r.socket.log("channel","close ".concat(r.topic," ").concat(r._joinRef())),r.state=R.closed,r.socket._remove(r)})),this._onError((function(e){r._isLeaving()||r._isClosed()||(r.socket.log("channel","error ".concat(r.topic),e),r.state=R.errored,r.rejoinTimer.scheduleTimeout())})),this.joinPush.receive("timeout",(function(){r._isJoining()&&(r.socket.log("channel","timeout ".concat(r.topic),r.joinPush.timeout),r.state=R.errored,r.rejoinTimer.scheduleTimeout())})),this._on(A.reply,{},(function(e,t){r._trigger(r._replyEventName(t),e)})),this.presence=new Y(this)}return s(e,[{key:"subscribe",value:function(e){var t,r,n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeout;if(this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";var o=this.params.config,s=o.broadcast,a=o.presence;this._onError((function(t){return e&&e("CHANNEL_ERROR",t)})),this._onClose((function(){return e&&e("CLOSED")}));var c={},u={broadcast:s,presence:a,postgres_changes:null!==(r=null===(t=this.bindings.postgres_changes)||void 0===t?void 0:t.map((function(e){return e.filter})))&&void 0!==r?r:[]};return this.socket.accessToken&&(c.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:u},c)),this.joinedOnce=!0,this._rejoin(i),this.joinPush.receive("ok",(function(t){var r,i=t.postgres_changes;if(n.socket.accessToken&&n.socket.setAuth(n.socket.accessToken),void 0!==i){for(var o=n.bindings.postgres_changes,s=null!==(r=null===o||void 0===o?void 0:o.length)&&void 0!==r?r:0,a=[],c=0;c<s;c++){var u=o[c],l=u.filter,h=l.event,f=l.schema,d=l.table,p=l.filter,v=i&&i[c];if(!v||v.event!==h||v.schema!==f||v.table!==d||v.filter!==p)return n.unsubscribe(),void(e&&e("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes")));a.push(Object.assign(Object.assign({},u),{id:v.id}))}return n.bindings.postgres_changes=a,void(e&&e("SUBSCRIBED"))}e&&e("SUBSCRIBED")})).receive("error",(function(t){e&&e("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(t).join(", ")||"error")))})).receive("timeout",(function(){e&&e("TIMED_OUT")})),this}},{key:"presenceState",value:function(){return this.presence.state}},{key:"track",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ue(this,void 0,void 0,t().mark((function n(){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),n,this)})))}},{key:"untrack",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return ue(this,void 0,void 0,t().mark((function r(){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.send({type:"presence",event:"untrack"},e);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),r,this)})))}},{key:"on",value:function(e,t,r){return this._on(e,t,r)}},{key:"send",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n){var i,o,s,a=t._push(e.type,e,r.timeout||t.timeout);a.rateLimited&&n("rate limited"),"broadcast"!==e.type||(null===(s=null===(o=null===(i=t.params)||void 0===i?void 0:i.config)||void 0===o?void 0:o.broadcast)||void 0===s?void 0:s.ack)||n("ok"),a.receive("ok",(function(){return n("ok")})),a.receive("timeout",(function(){return n("timed out")}))}))}},{key:"updateJoinPayload",value:function(e){this.joinPush.updatePayload(e)}},{key:"unsubscribe",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this.state=R.leaving;var r=function(){e.socket.log("channel","leave ".concat(e.topic)),e._trigger(A.close,"leave",e._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise((function(n){var i=new V(e,A.leave,{},t);i.receive("ok",(function(){r(),n("ok")})).receive("timeout",(function(){r(),n("timed out")})).receive("error",(function(){n("error")})),i.send(),e._canPush()||i.trigger("ok",{})}))}},{key:"_push",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeout;if(!this.joinedOnce)throw"tried to push '".concat(e,"' to '").concat(this.topic,"' before joining. Use channel.subscribe() before pushing events");var n=new V(this,e,t,r);return this._canPush()?n.send():(n.startTimeout(),this.pushBuffer.push(n)),n}},{key:"_onMessage",value:function(e,t,r){return t}},{key:"_isMember",value:function(e){return this.topic===e}},{key:"_joinRef",value:function(){return this.joinPush.ref}},{key:"_trigger",value:function(e,t,r){var n,i,o=this,s=e.toLocaleLowerCase(),a=A.close,c=A.error,u=A.leave,l=A.join;if(!(r&&[a,c,u,l].indexOf(s)>=0&&r!==this._joinRef())){var h=this._onMessage(s,t,r);if(t&&!h)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(s)?null===(n=this.bindings.postgres_changes)||void 0===n||n.filter((function(e){var t,r,n;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(n=null===(r=e.filter)||void 0===r?void 0:r.event)||void 0===n?void 0:n.toLocaleLowerCase())===s})).map((function(e){return e.callback(h,r)})):null===(i=this.bindings[s])||void 0===i||i.filter((function(e){var r,n,i,o,a,c;if(["broadcast","presence","postgres_changes"].includes(s)){if("id"in e){var u=e.id,l=null===(r=e.filter)||void 0===r?void 0:r.event;return u&&(null===(n=t.ids)||void 0===n?void 0:n.includes(u))&&("*"===l||(null===l||void 0===l?void 0:l.toLocaleLowerCase())===(null===(i=t.data)||void 0===i?void 0:i.type.toLocaleLowerCase()))}var h=null===(a=null===(o=null===e||void 0===e?void 0:e.filter)||void 0===o?void 0:o.event)||void 0===a?void 0:a.toLocaleLowerCase();return"*"===h||h===(null===(c=null===t||void 0===t?void 0:t.event)||void 0===c?void 0:c.toLocaleLowerCase())}return e.type.toLocaleLowerCase()===s})).map((function(e){if("object"===typeof h&&"ids"in h){var t=h.data,n={schema:t.schema,table:t.table,commit_timestamp:t.commit_timestamp,eventType:t.type,new:{},old:{},errors:t.errors};h=Object.assign(Object.assign({},n),o._getPayloadRecords(t))}e.callback(h,r)}))}}},{key:"_isClosed",value:function(){return this.state===R.closed}},{key:"_isJoined",value:function(){return this.state===R.joined}},{key:"_isJoining",value:function(){return this.state===R.joining}},{key:"_isLeaving",value:function(){return this.state===R.leaving}},{key:"_replyEventName",value:function(e){return"chan_reply_".concat(e)}},{key:"_on",value:function(e,t,r){var n=e.toLocaleLowerCase(),i={type:n,filter:t,callback:r};return this.bindings[n]?this.bindings[n].push(i):this.bindings[n]=[i],this}},{key:"_off",value:function(t,r){var n=t.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter((function(t){var i;return!((null===(i=t.type)||void 0===i?void 0:i.toLocaleLowerCase())===n&&e.isEqual(t.filter,r))})),this}},{key:"_rejoinUntilConnected",value:function(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}},{key:"_onClose",value:function(e){this._on(A.close,{},e)}},{key:"_onError",value:function(e){this._on(A.error,{},(function(t){return e(t)}))}},{key:"_canPush",value:function(){return this.socket.isConnected()&&this._isJoined()}},{key:"_rejoin",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.timeout;this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=R.joining,this.joinPush.resend(e))}},{key:"_getPayloadRecords",value:function(e){var t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=ee(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=ee(e.columns,e.old_record)),t}}],[{key:"isEqual",value:function(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var r in e)if(e[r]!==t[r])return!1;return!0}}]),e}(),he=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},fe=function(){},de=function(){function e(r,i){var o,s=this;n(this,e),this.accessToken=null,this.channels=[],this.endPoint="",this.headers=G,this.params={},this.timeout=z,this.transport=H.w3cwebsocket,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=fe,this.conn=null,this.sendBuffer=[],this.serializer=new $,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.eventsPerSecondLimitMs=100,this.inThrottle=!1,this.endPoint="".concat(r,"/").concat(C.websocket),(null===i||void 0===i?void 0:i.params)&&(this.params=i.params),(null===i||void 0===i?void 0:i.headers)&&(this.headers=Object.assign(Object.assign({},this.headers),i.headers)),(null===i||void 0===i?void 0:i.timeout)&&(this.timeout=i.timeout),(null===i||void 0===i?void 0:i.logger)&&(this.logger=i.logger),(null===i||void 0===i?void 0:i.transport)&&(this.transport=i.transport),(null===i||void 0===i?void 0:i.heartbeatIntervalMs)&&(this.heartbeatIntervalMs=i.heartbeatIntervalMs);var a=null===(o=null===i||void 0===i?void 0:i.params)||void 0===o?void 0:o.eventsPerSecond;a&&(this.eventsPerSecondLimitMs=Math.floor(1e3/a)),this.reconnectAfterMs=(null===i||void 0===i?void 0:i.reconnectAfterMs)?i.reconnectAfterMs:function(e){return[1e3,2e3,5e3,1e4][e-1]||1e4},this.encode=(null===i||void 0===i?void 0:i.encode)?i.encode:function(e,t){return t(JSON.stringify(e))},this.decode=(null===i||void 0===i?void 0:i.decode)?i.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new K((function(){return he(s,void 0,void 0,t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.disconnect(),this.connect();case 2:case"end":return e.stop()}}),e,this)})))}),this.reconnectAfterMs)}return s(e,[{key:"connect",value:function(){var e=this;this.conn||(this.conn=new this.transport(this._endPointURL(),[],null,this.headers),this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=function(){return e._onConnOpen()},this.conn.onerror=function(t){return e._onConnError(t)},this.conn.onmessage=function(t){return e._onConnMessage(t)},this.conn.onclose=function(t){return e._onConnClose(t)}))}},{key:"disconnect",value:function(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,null!==t&&void 0!==t?t:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}},{key:"getChannels",value:function(){return this.channels}},{key:"removeChannel",value:function(e){var t=this;return e.unsubscribe().then((function(e){return 0===t.channels.length&&t.disconnect(),e}))}},{key:"removeAllChannels",value:function(){var e=this;return Promise.all(this.channels.map((function(e){return e.unsubscribe()}))).then((function(t){return e.disconnect(),t}))}},{key:"log",value:function(e,t,r){this.logger(e,t,r)}},{key:"connectionState",value:function(){switch(this.conn&&this.conn.readyState){case P.connecting:return I.Connecting;case P.open:return I.Open;case P.closing:return I.Closing;default:return I.Closed}}},{key:"isConnected",value:function(){return this.connectionState()===I.Open}},{key:"channel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};this.isConnected()||this.connect();var r=new le("realtime:".concat(e),t,this);return this.channels.push(r),r}},{key:"push",value:function(e){var t=this,r=e.topic,n=e.event,i=e.payload,o=e.ref,s=function(){t.encode(e,(function(e){var r;null===(r=t.conn)||void 0===r||r.send(e)}))};if(this.log("push","".concat(r," ").concat(n," (").concat(o,")"),i),this.isConnected())if(["broadcast","presence","postgres_changes"].includes(n)){if(this._throttle(s)())return"rate limited"}else s();else this.sendBuffer.push(s)}},{key:"setAuth",value:function(e){this.accessToken=e,this.channels.forEach((function(t){e&&t.updateJoinPayload({access_token:e}),t.joinedOnce&&t._isJoined()&&t._push(A.access_token,{access_token:e})}))}},{key:"_makeRef",value:function(){var e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}},{key:"_leaveOpenTopic",value:function(e){var t=this.channels.find((function(t){return t.topic===e&&(t._isJoined()||t._isJoining())}));t&&(this.log("transport",'leaving duplicate topic "'.concat(e,'"')),t.unsubscribe())}},{key:"_remove",value:function(e){this.channels=this.channels.filter((function(t){return t._joinRef()!==e._joinRef()}))}},{key:"_endPointURL",value:function(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}},{key:"_onConnMessage",value:function(e){var t=this;this.decode(e.data,(function(e){var r=e.topic,n=e.event,i=e.payload,o=e.ref;(o&&o===t.pendingHeartbeatRef||n===(null===i||void 0===i?void 0:i.type))&&(t.pendingHeartbeatRef=null),t.log("receive","".concat(i.status||""," ").concat(r," ").concat(n," ").concat(o&&"("+o+")"||""),i),t.channels.filter((function(e){return e._isMember(r)})).forEach((function(e){return e._trigger(n,i,o)})),t.stateChangeCallbacks.message.forEach((function(t){return t(e)}))}))}},{key:"_onConnOpen",value:function(){var e=this;this.log("transport","connected to ".concat(this._endPointURL())),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval((function(){return e._sendHeartbeat()}),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach((function(e){return e()}))}},{key:"_onConnClose",value:function(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach((function(t){return t(e)}))}},{key:"_onConnError",value:function(e){this.log("transport",e.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach((function(t){return t(e)}))}},{key:"_triggerChanError",value:function(){this.channels.forEach((function(e){return e._trigger(A.error)}))}},{key:"_appendParams",value:function(e,t){if(0===Object.keys(t).length)return e;var r=e.match(/\?/)?"&":"?",n=new URLSearchParams(t);return"".concat(e).concat(r).concat(n)}},{key:"_flushSendBuffer",value:function(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach((function(e){return e()})),this.sendBuffer=[])}},{key:"_sendHeartbeat",value:function(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),void(null===(e=this.conn)||void 0===e||e.close(1e3,"hearbeat timeout"));this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}},{key:"_throttle",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.eventsPerSecondLimitMs;return function(){return!!t.inThrottle||(e(),r>0&&(t.inThrottle=!0,setTimeout((function(){t.inThrottle=!1}),r)),!1)}}}]),e}(),pe=function(e){h(r,e);var t=p(r);function r(e){var i;return n(this,r),(i=t.call(this,e)).__isStorageError=!0,i.name="StorageError",i}return s(r)}(b(Error));function ve(e){return"object"===typeof e&&null!==e&&"__isStorageError"in e}var ye=function(e){h(r,e);var t=p(r);function r(e,i){var o;return n(this,r),(o=t.call(this,e)).name="StorageApiError",o.status=i,o}return s(r,[{key:"toJSON",value:function(){return{name:this.name,message:this.message,status:this.status}}}]),r}(pe),be=function(e){h(r,e);var t=p(r);function r(e,i){var o;return n(this,r),(o=t.call(this,e)).name="StorageUnknownError",o.originalError=i,o}return s(r)}(pe),me=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},ge=function(e){var n;return n=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return me(void 0,void 0,void 0,t().mark((function e(){var i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(r.t.bind(r,570,23));case 2:return e.next=4,(i=e.sent).fetch.apply(i,n);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))}:fetch),function(){return n.apply(void 0,arguments)}},ke=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},we=function(e){return e.msg||e.message||e.error_description||e.error||JSON.stringify(e)},_e=function(e,n){return ke(void 0,void 0,void 0,t().mark((function i(){var o;return t().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,me(void 0,void 0,void 0,t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("undefined"!==typeof Response){e.next=4;break}return e.next=3,Promise.resolve().then(r.t.bind(r,570,23));case 3:return e.abrupt("return",e.sent.Response);case 4:return e.abrupt("return",Response);case 5:case"end":return e.stop()}}),e)})));case 2:o=i.sent,e instanceof o?e.json().then((function(t){n(new ye(we(t),e.status||500))})):n(new be(we(e),e));case 4:case"end":return i.stop()}}),i)})))},xe=function(e,t,r,n){var i={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"===e?i:(i.headers=Object.assign({"Content-Type":"application/json"},null===t||void 0===t?void 0:t.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};function Se(e,r,n,i,o,s){return ke(this,void 0,void 0,t().mark((function a(){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,a){e(n,xe(r,i,o,s)).then((function(e){if(!e.ok)throw e;return(null===i||void 0===i?void 0:i.noResolveJson)?e:e.json()})).then((function(e){return t(e)})).catch((function(e){return _e(e,a)}))})));case 1:case"end":return t.stop()}}),a)})))}function Ee(e,r,n,i){return ke(this,void 0,void 0,t().mark((function o(){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Se(e,"GET",r,n,i));case 1:case"end":return t.stop()}}),o)})))}function Oe(e,r,n,i,o){return ke(this,void 0,void 0,t().mark((function s(){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Se(e,"POST",r,i,o,n));case 1:case"end":return t.stop()}}),s)})))}function Te(e,r,n,i,o){return ke(this,void 0,void 0,t().mark((function s(){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Se(e,"PUT",r,i,o,n));case 1:case"end":return t.stop()}}),s)})))}function je(e,r,n,i,o){return ke(this,void 0,void 0,t().mark((function s(){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",Se(e,"DELETE",r,i,o,n));case 1:case"end":return t.stop()}}),s)})))}var Pe=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},Re={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Ae={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1},Ce=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0;n(this,e),this.url=t,this.headers=r,this.bucketId=i,this.fetch=ge(o)}return s(e,[{key:"uploadOrUpdate",value:function(e,r,n,i){return Pe(this,void 0,void 0,t().mark((function o(){var s,a,c,u,l,h,f;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a=Object.assign(Object.assign({},Ae),i),c=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(a.upsert)}),"undefined"!==typeof Blob&&n instanceof Blob?((s=new FormData).append("cacheControl",a.cacheControl),s.append("",n)):"undefined"!==typeof FormData&&n instanceof FormData?(s=n).append("cacheControl",a.cacheControl):(s=n,c["cache-control"]="max-age=".concat(a.cacheControl),c["content-type"]=a.contentType),u=this._removeEmptyFolders(r),l=this._getFinalPath(u),t.next=8,this.fetch("".concat(this.url,"/object/").concat(l),{method:e,body:s,headers:c});case 8:if(!(h=t.sent).ok){t.next=13;break}return t.abrupt("return",{data:{path:u},error:null});case 13:return t.next=15,h.json();case 15:return f=t.sent,t.abrupt("return",{data:null,error:f});case 17:t.next=24;break;case 19:if(t.prev=19,t.t0=t.catch(0),!ve(t.t0)){t.next=23;break}return t.abrupt("return",{data:null,error:t.t0});case 23:throw t.t0;case 24:case"end":return t.stop()}}),o,this,[[0,19]])})))}},{key:"upload",value:function(e,r,n){return Pe(this,void 0,void 0,t().mark((function i(){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.uploadOrUpdate("POST",e,r,n));case 1:case"end":return t.stop()}}),i,this)})))}},{key:"update",value:function(e,r,n){return Pe(this,void 0,void 0,t().mark((function i(){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",this.uploadOrUpdate("PUT",e,r,n));case 1:case"end":return t.stop()}}),i,this)})))}},{key:"move",value:function(e,r){return Pe(this,void 0,void 0,t().mark((function n(){var i;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Oe(this.fetch,"".concat(this.url,"/object/move"),{bucketId:this.bucketId,sourceKey:e,destinationKey:r},{headers:this.headers});case 3:return i=t.sent,t.abrupt("return",{data:i,error:null});case 7:if(t.prev=7,t.t0=t.catch(0),!ve(t.t0)){t.next=11;break}return t.abrupt("return",{data:null,error:t.t0});case 11:throw t.t0;case 12:case"end":return t.stop()}}),n,this,[[0,7]])})))}},{key:"copy",value:function(e,r){return Pe(this,void 0,void 0,t().mark((function n(){var i;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Oe(this.fetch,"".concat(this.url,"/object/copy"),{bucketId:this.bucketId,sourceKey:e,destinationKey:r},{headers:this.headers});case 3:return i=t.sent,t.abrupt("return",{data:{path:i.Key},error:null});case 7:if(t.prev=7,t.t0=t.catch(0),!ve(t.t0)){t.next=11;break}return t.abrupt("return",{data:null,error:t.t0});case 11:throw t.t0;case 12:case"end":return t.stop()}}),n,this,[[0,7]])})))}},{key:"createSignedUrl",value:function(e,r,n){return Pe(this,void 0,void 0,t().mark((function i(){var o,s,a,c;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,o=this._getFinalPath(e),t.next=4,Oe(this.fetch,"".concat(this.url,"/object/sign/").concat(o),Object.assign({expiresIn:r},(null===n||void 0===n?void 0:n.transform)?{transform:n.transform}:{}),{headers:this.headers});case 4:return s=t.sent,a=(null===n||void 0===n?void 0:n.download)?"&download=".concat(!0===n.download?"":n.download):"",c=encodeURI("".concat(this.url).concat(s.signedURL).concat(a)),s={signedUrl:c},t.abrupt("return",{data:s,error:null});case 11:if(t.prev=11,t.t0=t.catch(0),!ve(t.t0)){t.next=15;break}return t.abrupt("return",{data:null,error:t.t0});case 15:throw t.t0;case 16:case"end":return t.stop()}}),i,this,[[0,11]])})))}},{key:"createSignedUrls",value:function(e,r,n){return Pe(this,void 0,void 0,t().mark((function i(){var o,s,a=this;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Oe(this.fetch,"".concat(this.url,"/object/sign/").concat(this.bucketId),{expiresIn:r,paths:e},{headers:this.headers});case 3:return o=t.sent,s=(null===n||void 0===n?void 0:n.download)?"&download=".concat(!0===n.download?"":n.download):"",t.abrupt("return",{data:o.map((function(e){return Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI("".concat(a.url).concat(e.signedURL).concat(s)):null})})),error:null});case 8:if(t.prev=8,t.t0=t.catch(0),!ve(t.t0)){t.next=12;break}return t.abrupt("return",{data:null,error:t.t0});case 12:throw t.t0;case 13:case"end":return t.stop()}}),i,this,[[0,8]])})))}},{key:"download",value:function(e,r){return Pe(this,void 0,void 0,t().mark((function n(){var i,o,s,a,c,u,l;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i="undefined"!==typeof(null===r||void 0===r?void 0:r.transform),o=i?"render/image/authenticated":"object",s=this.transformOptsToQueryString((null===r||void 0===r?void 0:r.transform)||{}),a=s?"?".concat(s):"",t.prev=4,c=this._getFinalPath(e),t.next=8,Ee(this.fetch,"".concat(this.url,"/").concat(o,"/").concat(c).concat(a),{headers:this.headers,noResolveJson:!0});case 8:return u=t.sent,t.next=11,u.blob();case 11:return l=t.sent,t.abrupt("return",{data:l,error:null});case 15:if(t.prev=15,t.t0=t.catch(4),!ve(t.t0)){t.next=19;break}return t.abrupt("return",{data:null,error:t.t0});case 19:throw t.t0;case 20:case"end":return t.stop()}}),n,this,[[4,15]])})))}},{key:"getPublicUrl",value:function(e,t){var r=this._getFinalPath(e),n=[],i=(null===t||void 0===t?void 0:t.download)?"download=".concat(!0===t.download?"":t.download):"";""!==i&&n.push(i);var o="undefined"!==typeof(null===t||void 0===t?void 0:t.transform)?"render/image":"object",s=this.transformOptsToQueryString((null===t||void 0===t?void 0:t.transform)||{});""!==s&&n.push(s);var a=n.join("&");return""!==a&&(a="?".concat(a)),{data:{publicUrl:encodeURI("".concat(this.url,"/").concat(o,"/public/").concat(r).concat(a))}}}},{key:"remove",value:function(e){return Pe(this,void 0,void 0,t().mark((function r(){var n;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,je(this.fetch,"".concat(this.url,"/object/").concat(this.bucketId),{prefixes:e},{headers:this.headers});case 3:return n=t.sent,t.abrupt("return",{data:n,error:null});case 7:if(t.prev=7,t.t0=t.catch(0),!ve(t.t0)){t.next=11;break}return t.abrupt("return",{data:null,error:t.t0});case 11:throw t.t0;case 12:case"end":return t.stop()}}),r,this,[[0,7]])})))}},{key:"list",value:function(e,r,n){return Pe(this,void 0,void 0,t().mark((function i(){var o,s;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,o=Object.assign(Object.assign(Object.assign({},Re),r),{prefix:e||""}),t.next=4,Oe(this.fetch,"".concat(this.url,"/object/list/").concat(this.bucketId),o,{headers:this.headers},n);case 4:return s=t.sent,t.abrupt("return",{data:s,error:null});case 8:if(t.prev=8,t.t0=t.catch(0),!ve(t.t0)){t.next=12;break}return t.abrupt("return",{data:null,error:t.t0});case 12:throw t.t0;case 13:case"end":return t.stop()}}),i,this,[[0,8]])})))}},{key:"_getFinalPath",value:function(e){return"".concat(this.bucketId,"/").concat(e)}},{key:"_removeEmptyFolders",value:function(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}},{key:"transformOptsToQueryString",value:function(e){var t=[];return e.width&&t.push("width=".concat(e.width)),e.height&&t.push("height=".concat(e.height)),e.resize&&t.push("resize=".concat(e.resize)),e.format&&t.push("format=".concat(e.format)),e.quality&&t.push("quality=".concat(e.quality)),t.join("&")}}]),e}(),Ie={"X-Client-Info":"storage-js/".concat("2.3.0")},Le=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},Ue=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=arguments.length>2?arguments[2]:void 0;n(this,e),this.url=t,this.headers=Object.assign(Object.assign({},Ie),r),this.fetch=ge(i)}return s(e,[{key:"listBuckets",value:function(){return Le(this,void 0,void 0,t().mark((function e(){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ee(this.fetch,"".concat(this.url,"/bucket"),{headers:this.headers});case 3:return r=e.sent,e.abrupt("return",{data:r,error:null});case 7:if(e.prev=7,e.t0=e.catch(0),!ve(e.t0)){e.next=11;break}return e.abrupt("return",{data:null,error:e.t0});case 11:throw e.t0;case 12:case"end":return e.stop()}}),e,this,[[0,7]])})))}},{key:"getBucket",value:function(e){return Le(this,void 0,void 0,t().mark((function r(){var n;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Ee(this.fetch,"".concat(this.url,"/bucket/").concat(e),{headers:this.headers});case 3:return n=t.sent,t.abrupt("return",{data:n,error:null});case 7:if(t.prev=7,t.t0=t.catch(0),!ve(t.t0)){t.next=11;break}return t.abrupt("return",{data:null,error:t.t0});case 11:throw t.t0;case 12:case"end":return t.stop()}}),r,this,[[0,7]])})))}},{key:"createBucket",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{public:!1};return Le(this,void 0,void 0,t().mark((function n(){var i;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Oe(this.fetch,"".concat(this.url,"/bucket"),{id:e,name:e,public:r.public},{headers:this.headers});case 3:return i=t.sent,t.abrupt("return",{data:i,error:null});case 7:if(t.prev=7,t.t0=t.catch(0),!ve(t.t0)){t.next=11;break}return t.abrupt("return",{data:null,error:t.t0});case 11:throw t.t0;case 12:case"end":return t.stop()}}),n,this,[[0,7]])})))}},{key:"updateBucket",value:function(e,r){return Le(this,void 0,void 0,t().mark((function n(){var i;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Te(this.fetch,"".concat(this.url,"/bucket/").concat(e),{id:e,name:e,public:r.public},{headers:this.headers});case 3:return i=t.sent,t.abrupt("return",{data:i,error:null});case 7:if(t.prev=7,t.t0=t.catch(0),!ve(t.t0)){t.next=11;break}return t.abrupt("return",{data:null,error:t.t0});case 11:throw t.t0;case 12:case"end":return t.stop()}}),n,this,[[0,7]])})))}},{key:"emptyBucket",value:function(e){return Le(this,void 0,void 0,t().mark((function r(){var n;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Oe(this.fetch,"".concat(this.url,"/bucket/").concat(e,"/empty"),{},{headers:this.headers});case 3:return n=t.sent,t.abrupt("return",{data:n,error:null});case 7:if(t.prev=7,t.t0=t.catch(0),!ve(t.t0)){t.next=11;break}return t.abrupt("return",{data:null,error:t.t0});case 11:throw t.t0;case 12:case"end":return t.stop()}}),r,this,[[0,7]])})))}},{key:"deleteBucket",value:function(e){return Le(this,void 0,void 0,t().mark((function r(){var n;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,je(this.fetch,"".concat(this.url,"/bucket/").concat(e),{},{headers:this.headers});case 3:return n=t.sent,t.abrupt("return",{data:n,error:null});case 7:if(t.prev=7,t.t0=t.catch(0),!ve(t.t0)){t.next=11;break}return t.abrupt("return",{data:null,error:t.t0});case 11:throw t.t0;case 12:case"end":return t.stop()}}),r,this,[[0,7]])})))}}]),e}(),De=function(e){h(r,e);var t=p(r);function r(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0;return n(this,r),t.call(this,e,i,o)}return s(r,[{key:"from",value:function(e){return new Ce(this.url,this.headers,e,this.fetch)}}]),r}(Ue),Ne={"X-Client-Info":"supabase-js/".concat("2.8.0")},Be=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},Fe=function(e){var t;return t=e||("undefined"===typeof fetch?U():fetch),function(){return t.apply(void 0,arguments)}},Me=function(e,r,n){var i=Fe(n),o="undefined"===typeof Headers?L.Headers:Headers;return function(n,s){return Be(void 0,void 0,void 0,t().mark((function a(){var c,u,l;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r();case 2:if(t.t1=c=t.sent,t.t0=null!==t.t1,!t.t0){t.next=6;break}t.t0=void 0!==c;case 6:if(!t.t0){t.next=10;break}t.t2=c,t.next=11;break;case 10:t.t2=e;case 11:return u=t.t2,(l=new o(null===s||void 0===s?void 0:s.headers)).has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization","Bearer ".concat(u)),t.abrupt("return",i(n,Object.assign(Object.assign({},s),{headers:l})));case 16:case"end":return t.stop()}}),a)})))}};var Je=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};var He=function(){return"undefined"!==typeof document},Ge={tested:!1,writable:!1},ze=function(){if(!He())return!1;try{if("object"!==typeof globalThis.localStorage)return!1}catch(t){return!1}if(Ge.tested)return Ge.writable;var e="lswt-".concat(Math.random()).concat(Math.random());try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Ge.tested=!0,Ge.writable=!0}catch(t){Ge.tested=!0,Ge.writable=!1}return Ge.writable};function qe(e,t){var r;t||(t=(null===(r=null===window||void 0===window?void 0:window.location)||void 0===r?void 0:r.href)||""),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&#]"+e+"(=([^&#]*)|&|#|$)").exec(t);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}var Ke=function(e){var n;return n=e||("undefined"===typeof fetch?function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];return Je(void 0,void 0,void 0,t().mark((function e(){var i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve().then(r.t.bind(r,570,23));case 2:return e.next=4,(i=e.sent).fetch.apply(i,n);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))}:fetch),function(){return n.apply(void 0,arguments)}},$e=function(e,r){return Je(void 0,void 0,void 0,t().mark((function n(){var i;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getItem(r);case 2:if(i=t.sent){t.next=5;break}return t.abrupt("return",null);case 5:return t.prev=5,t.abrupt("return",JSON.parse(i));case 9:return t.prev=9,t.t0=t.catch(5),t.abrupt("return",i);case 12:case"end":return t.stop()}}),n,null,[[5,9]])})))},Ve=function(e,r){return Je(void 0,void 0,void 0,t().mark((function n(){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.removeItem(r);case 2:case"end":return t.stop()}}),n)})))};var We=s((function e(){var t=this;n(this,e),this.promise=new e.promiseConstructor((function(e,r){t.resolve=e,t.reject=r}))}));function Ye(e){var t=e.split(".");if(3!==t.length)throw new Error("JWT is not valid: not a JWT structure");if(!/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i.test(t[1]))throw new Error("JWT is not valid: payload is not in base64url format");var r=t[1];return JSON.parse(function(e){var t,r,n,i,o,s,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",c="",u=0;for(e=e.replace("-","+").replace("_","/");u<e.length;)t=a.indexOf(e.charAt(u++))<<2|(i=a.indexOf(e.charAt(u++)))>>4,r=(15&i)<<4|(o=a.indexOf(e.charAt(u++)))>>2,n=(3&o)<<6|(s=a.indexOf(e.charAt(u++))),c+=String.fromCharCode(t),64!=o&&0!=r&&(c+=String.fromCharCode(r)),64!=s&&0!=n&&(c+=String.fromCharCode(n));return c}(r))}function Xe(e){return new Promise((function(t){setTimeout((function(){return t(null)}),e)}))}function Qe(e,r){var n=this;return new Promise((function(i,o){Je(n,void 0,void 0,t().mark((function n(){var s,a;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:s=0;case 1:if(!(s<1/0)){t.next=19;break}return t.prev=2,t.next=5,e(s);case 5:if(a=t.sent,r(s,null,a)){t.next=9;break}return i(a),t.abrupt("return");case 9:t.next=16;break;case 11:if(t.prev=11,t.t0=t.catch(2),r(s,t.t0)){t.next=16;break}return o(t.t0),t.abrupt("return");case 16:s++,t.next=1;break;case 19:case"end":return t.stop()}}),n,null,[[2,11]])})))}))}We.promiseConstructor=Promise;var Ze=function(e){h(r,e);var t=p(r);function r(e,i){var o;return n(this,r),(o=t.call(this,e)).__isAuthError=!0,o.name="AuthError",o.status=i,o}return s(r)}(b(Error));function et(e){return"object"===typeof e&&null!==e&&"__isAuthError"in e}var tt=function(e){h(r,e);var t=p(r);function r(e,i){var o;return n(this,r),(o=t.call(this,e,i)).name="AuthApiError",o.status=i,o}return s(r,[{key:"toJSON",value:function(){return{name:this.name,message:this.message,status:this.status}}}]),r}(Ze);function rt(e){return et(e)&&"AuthApiError"===e.name}var nt=function(e){h(r,e);var t=p(r);function r(e,i){var o;return n(this,r),(o=t.call(this,e)).name="AuthUnknownError",o.originalError=i,o}return s(r)}(Ze),it=function(e){h(r,e);var t=p(r);function r(e,i,o){var s;return n(this,r),(s=t.call(this,e)).name=i,s.status=o,s}return s(r,[{key:"toJSON",value:function(){return{name:this.name,message:this.message,status:this.status}}}]),r}(Ze),ot=function(e){h(r,e);var t=p(r);function r(){return n(this,r),t.call(this,"Auth session missing!","AuthSessionMissingError",400)}return s(r)}(it),st=function(e){h(r,e);var t=p(r);function r(e){return n(this,r),t.call(this,e,"AuthInvalidCredentialsError",400)}return s(r)}(it),at=function(e){h(r,e);var t=p(r);function r(e){var i,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return n(this,r),(i=t.call(this,e,"AuthImplicitGrantRedirectError",500)).details=null,i.details=o,i}return s(r,[{key:"toJSON",value:function(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}]),r}(it),ct=function(e){h(r,e);var t=p(r);function r(e,i){return n(this,r),t.call(this,e,"AuthRetryableFetchError",i)}return s(r)}(it),ut=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},lt=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r},ht=function(e){return e.msg||e.message||e.error_description||e.error||JSON.stringify(e)},ft=function(e,r){return ut(void 0,void 0,void 0,t().mark((function n(){var i;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=[502,503,504],"object"===typeof(n=e)&&null!==n&&"status"in n&&"ok"in n&&"json"in n&&"function"===typeof n.json?i.includes(e.status)?r(new ct(ht(e),e.status)):e.json().then((function(t){r(new tt(ht(t),e.status||500))})).catch((function(e){r(new nt(ht(e),e))})):r(new ct(ht(e),0));case 2:case"end":return t.stop()}var n}),n)})))},dt=function(e,t,r,n){var i={method:e,headers:(null===t||void 0===t?void 0:t.headers)||{}};return"GET"===e?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null===t||void 0===t?void 0:t.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),r))};function pt(e,r,n,i){var o;return ut(this,void 0,void 0,t().mark((function s(){var a,c,u,l;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Object.assign({},null===i||void 0===i?void 0:i.headers),(null===i||void 0===i?void 0:i.jwt)&&(a.Authorization="Bearer ".concat(i.jwt)),c=null!==(o=null===i||void 0===i?void 0:i.query)&&void 0!==o?o:{},(null===i||void 0===i?void 0:i.redirectTo)&&(c.redirect_to=i.redirectTo),u=Object.keys(c).length?"?"+new URLSearchParams(c).toString():"",t.next=7,vt(e,r,n+u,{headers:a,noResolveJson:null===i||void 0===i?void 0:i.noResolveJson},{},null===i||void 0===i?void 0:i.body);case 7:return l=t.sent,t.abrupt("return",(null===i||void 0===i?void 0:i.xform)?null===i||void 0===i?void 0:i.xform(l):{data:Object.assign({},l),error:null});case 9:case"end":return t.stop()}}),s)})))}function vt(e,r,n,i,o,s){return ut(this,void 0,void 0,t().mark((function a(){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise((function(t,a){e(n,dt(r,i,o,s)).then((function(e){if(!e.ok)throw e;return(null===i||void 0===i?void 0:i.noResolveJson)?e:e.json()})).then((function(e){return t(e)})).catch((function(e){return ft(e,a)}))})));case 1:case"end":return t.stop()}}),a)})))}function yt(e){var t,r,n=null;return function(e){return e.access_token&&e.refresh_token&&e.expires_in}(e)&&((n=Object.assign({},e)).expires_at=(r=e.expires_in,Math.round(Date.now()/1e3)+r)),{data:{session:n,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function bt(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function mt(e){return{data:e,error:null}}function gt(e){var t=e.action_link,r=e.email_otp,n=e.hashed_token,i=e.redirect_to,o=e.verification_type,s=lt(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:r,hashed_token:n,redirect_to:i,verification_type:o},user:Object.assign({},s)},error:null}}function kt(e){return e}var wt=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},_t=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(e);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(e,n[i])&&(r[n[i]]=e[n[i]])}return r},xt=function(){function e(t){var r=t.url,i=void 0===r?"":r,o=t.headers,s=void 0===o?{}:o,a=t.fetch;n(this,e),this.url=i,this.headers=s,this.fetch=Ke(a),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}return s(e,[{key:"signOut",value:function(e){return wt(this,void 0,void 0,t().mark((function r(){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,pt(this.fetch,"POST","".concat(this.url,"/logout"),{headers:this.headers,jwt:e,noResolveJson:!0});case 3:return t.abrupt("return",{data:null,error:null});case 6:if(t.prev=6,t.t0=t.catch(0),!et(t.t0)){t.next=10;break}return t.abrupt("return",{data:null,error:t.t0});case 10:throw t.t0;case 11:case"end":return t.stop()}}),r,this,[[0,6]])})))}},{key:"inviteUserByEmail",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return wt(this,void 0,void 0,t().mark((function n(){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,pt(this.fetch,"POST","".concat(this.url,"/invite"),{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:bt});case 3:return t.abrupt("return",t.sent);case 6:if(t.prev=6,t.t0=t.catch(0),!et(t.t0)){t.next=10;break}return t.abrupt("return",{data:{user:null},error:t.t0});case 10:throw t.t0;case 11:case"end":return t.stop()}}),n,this,[[0,6]])})))}},{key:"generateLink",value:function(e){return wt(this,void 0,void 0,t().mark((function r(){var n,i,o;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n=e.options,i=_t(e,["options"]),o=Object.assign(Object.assign({},i),n),"newEmail"in i&&(o.new_email=null===i||void 0===i?void 0:i.newEmail,delete o.newEmail),t.next=6,pt(this.fetch,"POST","".concat(this.url,"/admin/generate_link"),{body:o,headers:this.headers,xform:gt,redirectTo:null===n||void 0===n?void 0:n.redirectTo});case 6:return t.abrupt("return",t.sent);case 9:if(t.prev=9,t.t0=t.catch(0),!et(t.t0)){t.next=13;break}return t.abrupt("return",{data:{properties:null,user:null},error:t.t0});case 13:throw t.t0;case 14:case"end":return t.stop()}}),r,this,[[0,9]])})))}},{key:"createUser",value:function(e){return wt(this,void 0,void 0,t().mark((function r(){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,pt(this.fetch,"POST","".concat(this.url,"/admin/users"),{body:e,headers:this.headers,xform:bt});case 3:return t.abrupt("return",t.sent);case 6:if(t.prev=6,t.t0=t.catch(0),!et(t.t0)){t.next=10;break}return t.abrupt("return",{data:{user:null},error:t.t0});case 10:throw t.t0;case 11:case"end":return t.stop()}}),r,this,[[0,6]])})))}},{key:"listUsers",value:function(e){var r,n,i,o,s,a,c;return wt(this,void 0,void 0,t().mark((function u(){var l,h,f,d,p;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,l={nextPage:null,lastPage:0,total:0},t.next=4,pt(this.fetch,"GET","".concat(this.url,"/admin/users"),{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(r=null===e||void 0===e?void 0:e.page)||void 0===r?void 0:r.toString())&&void 0!==n?n:"",per_page:null!==(o=null===(i=null===e||void 0===e?void 0:e.perPage)||void 0===i?void 0:i.toString())&&void 0!==o?o:""},xform:kt});case 4:if(!(h=t.sent).error){t.next=7;break}throw h.error;case 7:return t.next=9,h.json();case 9:return f=t.sent,d=null!==(s=h.headers.get("x-total-count"))&&void 0!==s?s:0,(p=null!==(c=null===(a=h.headers.get("link"))||void 0===a?void 0:a.split(","))&&void 0!==c?c:[]).length>0&&(p.forEach((function(e){var t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),r=JSON.parse(e.split(";")[1].split("=")[1]);l["".concat(r,"Page")]=t})),l.total=parseInt(d)),t.abrupt("return",{data:Object.assign(Object.assign({},f),l),error:null});case 16:if(t.prev=16,t.t0=t.catch(0),!et(t.t0)){t.next=20;break}return t.abrupt("return",{data:{users:[]},error:t.t0});case 20:throw t.t0;case 21:case"end":return t.stop()}}),u,this,[[0,16]])})))}},{key:"getUserById",value:function(e){return wt(this,void 0,void 0,t().mark((function r(){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,pt(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,xform:bt});case 3:return t.abrupt("return",t.sent);case 6:if(t.prev=6,t.t0=t.catch(0),!et(t.t0)){t.next=10;break}return t.abrupt("return",{data:{user:null},error:t.t0});case 10:throw t.t0;case 11:case"end":return t.stop()}}),r,this,[[0,6]])})))}},{key:"updateUserById",value:function(e,r){return wt(this,void 0,void 0,t().mark((function n(){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,pt(this.fetch,"PUT","".concat(this.url,"/admin/users/").concat(e),{body:r,headers:this.headers,xform:bt});case 3:return t.abrupt("return",t.sent);case 6:if(t.prev=6,t.t0=t.catch(0),!et(t.t0)){t.next=10;break}return t.abrupt("return",{data:{user:null},error:t.t0});case 10:throw t.t0;case 11:case"end":return t.stop()}}),n,this,[[0,6]])})))}},{key:"deleteUser",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return wt(this,void 0,void 0,t().mark((function n(){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,pt(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e),{headers:this.headers,body:{should_soft_delete:r},xform:bt});case 3:return t.abrupt("return",t.sent);case 6:if(t.prev=6,t.t0=t.catch(0),!et(t.t0)){t.next=10;break}return t.abrupt("return",{data:{user:null},error:t.t0});case 10:throw t.t0;case 11:case"end":return t.stop()}}),n,this,[[0,6]])})))}},{key:"_listFactors",value:function(e){return wt(this,void 0,void 0,t().mark((function r(){var n,i,o;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,pt(this.fetch,"GET","".concat(this.url,"/admin/users/").concat(e.userId,"/factors"),{headers:this.headers,xform:function(e){return{data:{factors:e},error:null}}});case 3:return n=t.sent,i=n.data,o=n.error,t.abrupt("return",{data:i,error:o});case 9:if(t.prev=9,t.t0=t.catch(0),!et(t.t0)){t.next=13;break}return t.abrupt("return",{data:null,error:t.t0});case 13:throw t.t0;case 14:case"end":return t.stop()}}),r,this,[[0,9]])})))}},{key:"_deleteFactor",value:function(e){return wt(this,void 0,void 0,t().mark((function r(){var n;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,pt(this.fetch,"DELETE","".concat(this.url,"/admin/users/").concat(e.userId,"/factors/").concat(e.id),{headers:this.headers});case 3:return n=t.sent,t.abrupt("return",{data:n,error:null});case 7:if(t.prev=7,t.t0=t.catch(0),!et(t.t0)){t.next=11;break}return t.abrupt("return",{data:null,error:t.t0});case 11:throw t.t0;case 12:case"end":return t.stop()}}),r,this,[[0,7]])})))}}]),e}(),St={"X-Client-Info":"gotrue-js/".concat("2.12.1")},Et={getItem:function(e){return ze()?globalThis.localStorage.getItem(e):null},setItem:function(e,t){ze()&&globalThis.localStorage.setItem(e,t)},removeItem:function(e){ze()&&globalThis.localStorage.removeItem(e)}};var Ot=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))};!function(){if("object"!==typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!==typeof self&&(self.globalThis=self)}}();var Tt={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:St},jt=1e4,Pt=function(){function e(t){var r=this;n(this,e),this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.broadcastChannel=null;var i=Object.assign(Object.assign({},Tt),t);this.inMemorySession=null,this.storageKey=i.storageKey,this.autoRefreshToken=i.autoRefreshToken,this.persistSession=i.persistSession,this.storage=i.storage||Et,this.admin=new xt({url:i.url,headers:i.headers,fetch:i.fetch}),this.url=i.url,this.headers=i.headers,this.fetch=Ke(i.fetch),this.detectSessionInUrl=i.detectSessionInUrl,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},He()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey&&(this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey),this.broadcastChannel.addEventListener("message",(function(e){r._notifyAllSubscribers(e.data.event,e.data.session,!1)}))),this.initialize()}return s(e,[{key:"initialize",value:function(){return this.initializePromise||(this.initializePromise=this._initialize()),this.initializePromise}},{key:"_initialize",value:function(){return Ot(this,void 0,void 0,t().mark((function e(){var r,n,i,o,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.initializePromise){e.next=2;break}return e.abrupt("return",this.initializePromise);case 2:if(e.prev=2,!this.detectSessionInUrl||!this._isImplicitGrantFlow()){e.next=19;break}return e.next=6,this._getSessionFromUrl();case 6:if(r=e.sent,n=r.data,!(i=r.error)){e.next=13;break}return e.next=12,this._removeSession();case 12:return e.abrupt("return",{error:i});case 13:return o=n.session,s=n.redirectType,e.next=16,this._saveSession(o);case 16:return this._notifyAllSubscribers("SIGNED_IN",o),"recovery"===s&&this._notifyAllSubscribers("PASSWORD_RECOVERY",o),e.abrupt("return",{error:null});case 19:return e.next=21,this._recoverAndRefresh();case 21:return e.abrupt("return",{error:null});case 24:if(e.prev=24,e.t0=e.catch(2),!et(e.t0)){e.next=28;break}return e.abrupt("return",{error:e.t0});case 28:return e.abrupt("return",{error:new nt("Unexpected error during initialization",e.t0)});case 29:return e.prev=29,e.next=32,this._handleVisibilityChange();case 32:return e.finish(29);case 33:case"end":return e.stop()}}),e,this,[[2,24,29,33]])})))}},{key:"signUp",value:function(e){var r,n;return Ot(this,void 0,void 0,t().mark((function i(){var o,s,a,c,u,l,h,f,d,p,v,y;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this._removeSession();case 3:if(!("email"in e)){t.next=10;break}return s=e.email,a=e.password,c=e.options,t.next=7,pt(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,redirectTo:null===c||void 0===c?void 0:c.emailRedirectTo,body:{email:s,password:a,data:null!==(r=null===c||void 0===c?void 0:c.data)&&void 0!==r?r:{},gotrue_meta_security:{captcha_token:null===c||void 0===c?void 0:c.captchaToken}},xform:yt});case 7:o=t.sent,t.next=18;break;case 10:if(!("phone"in e)){t.next=17;break}return u=e.phone,l=e.password,h=e.options,t.next=14,pt(this.fetch,"POST","".concat(this.url,"/signup"),{headers:this.headers,body:{phone:u,password:l,data:null!==(n=null===h||void 0===h?void 0:h.data)&&void 0!==n?n:{},gotrue_meta_security:{captcha_token:null===h||void 0===h?void 0:h.captchaToken}},xform:yt});case 14:o=t.sent,t.next=18;break;case 17:throw new st("You must provide either an email or phone number and a password");case 18:if(d=(f=o).data,!(p=f.error)&&d){t.next=21;break}return t.abrupt("return",{data:{user:null,session:null},error:p});case 21:if(v=d.session,y=d.user,!d.session){t.next=27;break}return t.next=26,this._saveSession(d.session);case 26:this._notifyAllSubscribers("SIGNED_IN",v);case 27:return t.abrupt("return",{data:{user:y,session:v},error:null});case 30:if(t.prev=30,t.t0=t.catch(0),!et(t.t0)){t.next=34;break}return t.abrupt("return",{data:{user:null,session:null},error:t.t0});case 34:throw t.t0;case 35:case"end":return t.stop()}}),i,this,[[0,30]])})))}},{key:"signInWithPassword",value:function(e){var r,n;return Ot(this,void 0,void 0,t().mark((function i(){var o,s,a,c,u,l,h,f,d,p;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this._removeSession();case 3:if(!("email"in e)){t.next=10;break}return s=e.email,a=e.password,c=e.options,t.next=7,pt(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{email:s,password:a,data:null!==(r=null===c||void 0===c?void 0:c.data)&&void 0!==r?r:{},gotrue_meta_security:{captcha_token:null===c||void 0===c?void 0:c.captchaToken}},xform:yt});case 7:o=t.sent,t.next=18;break;case 10:if(!("phone"in e)){t.next=17;break}return u=e.phone,l=e.password,h=e.options,t.next=14,pt(this.fetch,"POST","".concat(this.url,"/token?grant_type=password"),{headers:this.headers,body:{phone:u,password:l,data:null!==(n=null===h||void 0===h?void 0:h.data)&&void 0!==n?n:{},gotrue_meta_security:{captcha_token:null===h||void 0===h?void 0:h.captchaToken}},xform:yt});case 14:o=t.sent,t.next=18;break;case 17:throw new st("You must provide either an email or phone number and a password");case 18:if(d=(f=o).data,!(p=f.error)&&d){t.next=21;break}return t.abrupt("return",{data:{user:null,session:null},error:p});case 21:if(!d.session){t.next=25;break}return t.next=24,this._saveSession(d.session);case 24:this._notifyAllSubscribers("SIGNED_IN",d.session);case 25:return t.abrupt("return",{data:d,error:p});case 28:if(t.prev=28,t.t0=t.catch(0),!et(t.t0)){t.next=32;break}return t.abrupt("return",{data:{user:null,session:null},error:t.t0});case 32:throw t.t0;case 33:case"end":return t.stop()}}),i,this,[[0,28]])})))}},{key:"signInWithOAuth",value:function(e){var r,n,i,o;return Ot(this,void 0,void 0,t().mark((function s(){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._removeSession();case 2:return t.abrupt("return",this._handleProviderSignIn(e.provider,{redirectTo:null===(r=e.options)||void 0===r?void 0:r.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(i=e.options)||void 0===i?void 0:i.queryParams,skipBrowserRedirect:null===(o=e.options)||void 0===o?void 0:o.skipBrowserRedirect}));case 3:case"end":return t.stop()}}),s,this)})))}},{key:"signInWithIdToken",value:function(e){return Ot(this,void 0,void 0,t().mark((function r(){var n,i,o,s,a,c,u;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._removeSession();case 2:return t.prev=2,n=e.options,i=e.provider,o=e.token,s=e.nonce,t.next=6,pt(this.fetch,"POST","".concat(this.url,"/token?grant_type=id_token"),{headers:this.headers,body:{provider:i,id_token:o,nonce:s,gotrue_meta_security:{captcha_token:null===n||void 0===n?void 0:n.captchaToken}},xform:yt});case 6:if(a=t.sent,c=a.data,!(u=a.error)&&c){t.next=10;break}return t.abrupt("return",{data:{user:null,session:null},error:u});case 10:if(!c.session){t.next=14;break}return t.next=13,this._saveSession(c.session);case 13:this._notifyAllSubscribers("SIGNED_IN",c.session);case 14:return t.abrupt("return",{data:c,error:u});case 17:if(t.prev=17,t.t0=t.catch(2),!et(t.t0)){t.next=21;break}return t.abrupt("return",{data:{user:null,session:null},error:t.t0});case 21:throw t.t0;case 22:case"end":return t.stop()}}),r,this,[[2,17]])})))}},{key:"signInWithOtp",value:function(e){var r,n,i,o;return Ot(this,void 0,void 0,t().mark((function s(){var a,c,u,l,h,f,d,p;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this._removeSession();case 3:if(!("email"in e)){t.next=10;break}return a=e.email,c=e.options,t.next=7,pt(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{email:a,data:null!==(r=null===c||void 0===c?void 0:c.data)&&void 0!==r?r:{},create_user:null===(n=null===c||void 0===c?void 0:c.shouldCreateUser)||void 0===n||n,gotrue_meta_security:{captcha_token:null===c||void 0===c?void 0:c.captchaToken}},redirectTo:null===c||void 0===c?void 0:c.emailRedirectTo});case 7:return u=t.sent,l=u.error,t.abrupt("return",{data:{user:null,session:null},error:l});case 10:if(!("phone"in e)){t.next=17;break}return h=e.phone,f=e.options,t.next=14,pt(this.fetch,"POST","".concat(this.url,"/otp"),{headers:this.headers,body:{phone:h,data:null!==(i=null===f||void 0===f?void 0:f.data)&&void 0!==i?i:{},create_user:null===(o=null===f||void 0===f?void 0:f.shouldCreateUser)||void 0===o||o,gotrue_meta_security:{captcha_token:null===f||void 0===f?void 0:f.captchaToken}}});case 14:return d=t.sent,p=d.error,t.abrupt("return",{data:{user:null,session:null},error:p});case 17:throw new st("You must provide either an email or phone number.");case 20:if(t.prev=20,t.t0=t.catch(0),!et(t.t0)){t.next=24;break}return t.abrupt("return",{data:{user:null,session:null},error:t.t0});case 24:throw t.t0;case 25:case"end":return t.stop()}}),s,this,[[0,20]])})))}},{key:"verifyOtp",value:function(e){var r,n;return Ot(this,void 0,void 0,t().mark((function i(){var o,s,a,c,u;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this._removeSession();case 3:return t.next=5,pt(this.fetch,"POST","".concat(this.url,"/verify"),{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:null===(r=e.options)||void 0===r?void 0:r.captchaToken}}),redirectTo:null===(n=e.options)||void 0===n?void 0:n.redirectTo,xform:yt});case 5:if(o=t.sent,s=o.data,!(a=o.error)){t.next=10;break}throw a;case 10:if(s){t.next=12;break}throw"An error occurred on token verification.";case 12:if(c=s.session,u=s.user,!(null===c||void 0===c?void 0:c.access_token)){t.next=18;break}return t.next=17,this._saveSession(c);case 17:this._notifyAllSubscribers("SIGNED_IN",c);case 18:return t.abrupt("return",{data:{user:u,session:c},error:null});case 21:if(t.prev=21,t.t0=t.catch(0),!et(t.t0)){t.next=25;break}return t.abrupt("return",{data:{user:null,session:null},error:t.t0});case 25:throw t.t0;case 26:case"end":return t.stop()}}),i,this,[[0,21]])})))}},{key:"signInWithSSO",value:function(e){var r,n,i;return Ot(this,void 0,void 0,t().mark((function o(){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this._removeSession();case 3:return t.next=5,pt(this.fetch,"POST","".concat(this.url,"/sso"),{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(n=null===(r=e.options)||void 0===r?void 0:r.redirectTo)&&void 0!==n?n:void 0}),(null===(i=null===e||void 0===e?void 0:e.options)||void 0===i?void 0:i.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0}),headers:this.headers,xform:mt});case 5:return t.abrupt("return",t.sent);case 8:if(t.prev=8,t.t0=t.catch(0),!et(t.t0)){t.next=12;break}return t.abrupt("return",{data:null,error:t.t0});case 12:throw t.t0;case 13:case"end":return t.stop()}}),o,this,[[0,8]])})))}},{key:"getSession",value:function(){return Ot(this,void 0,void 0,t().mark((function e(){var r,n,i,o,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.initializePromise;case 2:if(r=null,!this.persistSession){e.next=16;break}return e.next=6,$e(this.storage,this.storageKey);case 6:if(null===(n=e.sent)){e.next=14;break}if(!this._isValidSession(n)){e.next=12;break}r=n,e.next=14;break;case 12:return e.next=14,this._removeSession();case 14:e.next=17;break;case 16:r=this.inMemorySession;case 17:if(r){e.next=19;break}return e.abrupt("return",{data:{session:null},error:null});case 19:if(!!r.expires_at&&r.expires_at<=Date.now()/1e3){e.next=22;break}return e.abrupt("return",{data:{session:r},error:null});case 22:return e.next=24,this._callRefreshToken(r.refresh_token);case 24:if(i=e.sent,o=i.session,!(s=i.error)){e.next=29;break}return e.abrupt("return",{data:{session:null},error:s});case 29:return e.abrupt("return",{data:{session:o},error:null});case 30:case"end":return e.stop()}}),e,this)})))}},{key:"getUser",value:function(e){var r,n;return Ot(this,void 0,void 0,t().mark((function i(){var o,s,a;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e){t.next=10;break}return t.next=4,this.getSession();case 4:if(o=t.sent,s=o.data,!(a=o.error)){t.next=9;break}throw a;case 9:e=null!==(n=null===(r=s.session)||void 0===r?void 0:r.access_token)&&void 0!==n?n:void 0;case 10:return t.next=12,pt(this.fetch,"GET","".concat(this.url,"/user"),{headers:this.headers,jwt:e,xform:bt});case 12:return t.abrupt("return",t.sent);case 15:if(t.prev=15,t.t0=t.catch(0),!et(t.t0)){t.next=19;break}return t.abrupt("return",{data:{user:null},error:t.t0});case 19:throw t.t0;case 20:case"end":return t.stop()}}),i,this,[[0,15]])})))}},{key:"updateUser",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ot(this,void 0,void 0,t().mark((function n(){var i,o,s,a,c,u,l;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.getSession();case 3:if(i=t.sent,o=i.data,!(s=i.error)){t.next=8;break}throw s;case 8:if(o.session){t.next=10;break}throw new ot;case 10:return a=o.session,t.next=13,pt(this.fetch,"PUT","".concat(this.url,"/user"),{headers:this.headers,redirectTo:null===r||void 0===r?void 0:r.emailRedirectTo,body:e,jwt:a.access_token,xform:bt});case 13:if(c=t.sent,u=c.data,!(l=c.error)){t.next=18;break}throw l;case 18:return a.user=u.user,t.next=21,this._saveSession(a);case 21:return this._notifyAllSubscribers("USER_UPDATED",a),t.abrupt("return",{data:{user:a.user},error:null});case 25:if(t.prev=25,t.t0=t.catch(0),!et(t.t0)){t.next=29;break}return t.abrupt("return",{data:{user:null},error:t.t0});case 29:throw t.t0;case 30:case"end":return t.stop()}}),n,this,[[0,25]])})))}},{key:"_decodeJWT",value:function(e){return Ye(e)}},{key:"setSession",value:function(e){return Ot(this,void 0,void 0,t().mark((function r(){var n,i,o,s,a,c,u,l,h,f,d;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e.access_token&&e.refresh_token){t.next=3;break}throw new ot;case 3:if(n=Date.now()/1e3,i=n,o=!0,s=null,(a=Ye(e.access_token)).exp&&(i=a.exp,o=i<=n),!o){t.next=22;break}return t.next=12,this._callRefreshToken(e.refresh_token);case 12:if(c=t.sent,u=c.session,!(l=c.error)){t.next=17;break}return t.abrupt("return",{data:{user:null,session:null},error:l});case 17:if(u){t.next=19;break}return t.abrupt("return",{data:{user:null,session:null},error:null});case 19:s=u,t.next=33;break;case 22:return t.next=24,this.getUser(e.access_token);case 24:if(h=t.sent,f=h.data,!(d=h.error)){t.next=29;break}throw d;case 29:return s={access_token:e.access_token,refresh_token:e.refresh_token,user:f.user,token_type:"bearer",expires_in:i-n,expires_at:i},t.next=32,this._saveSession(s);case 32:this._notifyAllSubscribers("SIGNED_IN",s);case 33:return t.abrupt("return",{data:{user:s.user,session:s},error:null});case 36:if(t.prev=36,t.t0=t.catch(0),!et(t.t0)){t.next=40;break}return t.abrupt("return",{data:{session:null,user:null},error:t.t0});case 40:throw t.t0;case 41:case"end":return t.stop()}}),r,this,[[0,36]])})))}},{key:"refreshSession",value:function(e){var r;return Ot(this,void 0,void 0,t().mark((function n(){var i,o,s,a,c,u;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,e){t.next=10;break}return t.next=4,this.getSession();case 4:if(i=t.sent,o=i.data,!(s=i.error)){t.next=9;break}throw s;case 9:e=null!==(r=o.session)&&void 0!==r?r:void 0;case 10:if(null===e||void 0===e?void 0:e.refresh_token){t.next=12;break}throw new ot;case 12:return t.next=14,this._callRefreshToken(e.refresh_token);case 14:if(a=t.sent,c=a.session,!(u=a.error)){t.next=19;break}return t.abrupt("return",{data:{user:null,session:null},error:u});case 19:if(c){t.next=21;break}return t.abrupt("return",{data:{user:null,session:null},error:null});case 21:return t.abrupt("return",{data:{user:c.user,session:c},error:null});case 24:if(t.prev=24,t.t0=t.catch(0),!et(t.t0)){t.next=28;break}return t.abrupt("return",{data:{user:null,session:null},error:t.t0});case 28:throw t.t0;case 29:case"end":return t.stop()}}),n,this,[[0,24]])})))}},{key:"_getSessionFromUrl",value:function(){return Ot(this,void 0,void 0,t().mark((function e(){var r,n,i,o,s,a,c,u,l,h,f,d,p,v,y,b,m;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,He()){e.next=3;break}throw new at("No browser detected.");case 3:if(this._isImplicitGrantFlow()){e.next=5;break}throw new at("Not a valid implicit grant flow url.");case 5:if(!(r=qe("error_description"))){e.next=14;break}if(n=qe("error_code")){e.next=10;break}throw new at("No error_code detected.");case 10:if(i=qe("error")){e.next=13;break}throw new at("No error detected.");case 13:throw new at(r,{error:i,code:n});case 14:if(o=qe("provider_token"),s=qe("provider_refresh_token"),a=qe("access_token")){e.next=19;break}throw new at("No access_token detected.");case 19:if(c=qe("expires_in")){e.next=22;break}throw new at("No expires_in detected.");case 22:if(u=qe("refresh_token")){e.next=25;break}throw new at("No refresh_token detected.");case 25:if(l=qe("token_type")){e.next=28;break}throw new at("No token_type detected.");case 28:return h=Math.round(Date.now()/1e3),f=h+parseInt(c),e.next=32,this.getUser(a);case 32:if(d=e.sent,p=d.data,!(v=d.error)){e.next=37;break}throw v;case 37:return y=p.user,b={provider_token:o,provider_refresh_token:s,access_token:a,expires_in:parseInt(c),expires_at:f,refresh_token:u,token_type:l,user:y},m=qe("type"),window.location.hash="",e.abrupt("return",{data:{session:b,redirectType:m},error:null});case 44:if(e.prev=44,e.t0=e.catch(0),!et(e.t0)){e.next=48;break}return e.abrupt("return",{data:{session:null,redirectType:null},error:e.t0});case 48:throw e.t0;case 49:case"end":return e.stop()}}),e,this,[[0,44]])})))}},{key:"_isImplicitGrantFlow",value:function(){return He()&&(Boolean(qe("access_token"))||Boolean(qe("error_description")))}},{key:"signOut",value:function(){var e;return Ot(this,void 0,void 0,t().mark((function r(){var n,i,o,s,a,c;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getSession();case 2:if(n=t.sent,i=n.data,!(o=n.error)){t.next=7;break}return t.abrupt("return",{error:o});case 7:if(!(s=null===(e=i.session)||void 0===e?void 0:e.access_token)){t.next=16;break}return t.next=11,this.admin.signOut(s);case 11:if(a=t.sent,!(c=a.error)){t.next=16;break}if(rt(c)&&(404===c.status||401===c.status)){t.next=16;break}return t.abrupt("return",{error:c});case 16:return t.next=18,this._removeSession();case 18:return this._notifyAllSubscribers("SIGNED_OUT",null),t.abrupt("return",{error:null});case 20:case"end":return t.stop()}}),r,this)})))}},{key:"onAuthStateChange",value:function(e){var t=this,r="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})),n={id:r,callback:e,unsubscribe:function(){t.stateChangeEmitters.delete(r)}};return this.stateChangeEmitters.set(r,n),{data:{subscription:n}}}},{key:"resetPasswordForEmail",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Ot(this,void 0,void 0,t().mark((function n(){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,pt(this.fetch,"POST","".concat(this.url,"/recover"),{body:{email:e,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo});case 3:return t.abrupt("return",t.sent);case 6:if(t.prev=6,t.t0=t.catch(0),!et(t.t0)){t.next=10;break}return t.abrupt("return",{data:null,error:t.t0});case 10:throw t.t0;case 11:case"end":return t.stop()}}),n,this,[[0,6]])})))}},{key:"_refreshAccessToken",value:function(e){return Ot(this,void 0,void 0,t().mark((function r(){var n,i=this;return t().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,n=Date.now(),r.next=4,Qe((function(r){return Ot(i,void 0,void 0,t().mark((function n(){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Xe(200*r);case 2:return t.next=4,pt(this.fetch,"POST","".concat(this.url,"/token?grant_type=refresh_token"),{body:{refresh_token:e},headers:this.headers,xform:yt});case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),n,this)})))}),(function(e,t,r){return r&&r.error&&r.error instanceof ct&&Date.now()+200*(e+1)-n<jt}));case 4:return r.abrupt("return",r.sent);case 7:if(r.prev=7,r.t0=r.catch(0),!et(r.t0)){r.next=11;break}return r.abrupt("return",{data:{session:null,user:null},error:r.t0});case 11:throw r.t0;case 12:case"end":return r.stop()}}),r,null,[[0,7]])})))}},{key:"_isValidSession",value:function(e){return"object"===typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}},{key:"_handleProviderSignIn",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this._getUrlForProvider(e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return He()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}},{key:"_recoverAndRefresh",value:function(){var e;return Ot(this,void 0,void 0,t().mark((function r(){var n,i,o,s;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,$e(this.storage,this.storageKey);case 3:if(n=t.sent,this._isValidSession(n)){t.next=9;break}if(null===n){t.next=8;break}return t.next=8,this._removeSession();case 8:return t.abrupt("return");case 9:if(i=Math.round(Date.now()/1e3),!((null!==(e=n.expires_at)&&void 0!==e?e:1/0)<i+10)){t.next=26;break}if(!this.autoRefreshToken||!n.refresh_token){t.next=22;break}return t.next=14,this._callRefreshToken(n.refresh_token);case 14:if(o=t.sent,!(s=o.error)){t.next=20;break}return console.log(s.message),t.next=20,this._removeSession();case 20:t.next=24;break;case 22:return t.next=24,this._removeSession();case 24:t.next=30;break;case 26:if(!this.persistSession){t.next=29;break}return t.next=29,this._saveSession(n);case 29:this._notifyAllSubscribers("SIGNED_IN",n);case 30:t.next=36;break;case 32:return t.prev=32,t.t0=t.catch(0),console.error(t.t0),t.abrupt("return");case 36:case"end":return t.stop()}}),r,this,[[0,32]])})))}},{key:"_callRefreshToken",value:function(e){var r,n;return Ot(this,void 0,void 0,t().mark((function i(){var o,s,a,c,u;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.refreshingDeferred){t.next=2;break}return t.abrupt("return",this.refreshingDeferred.promise);case 2:if(t.prev=2,this.refreshingDeferred=new We,e){t.next=6;break}throw new ot;case 6:return t.next=8,this._refreshAccessToken(e);case 8:if(o=t.sent,s=o.data,!(a=o.error)){t.next=13;break}throw a;case 13:if(s.session){t.next=15;break}throw new ot;case 15:return t.next=17,this._saveSession(s.session);case 17:return this._notifyAllSubscribers("TOKEN_REFRESHED",s.session),c={session:s.session,error:null},this.refreshingDeferred.resolve(c),t.abrupt("return",c);case 23:if(t.prev=23,t.t0=t.catch(2),!et(t.t0)){t.next=29;break}return u={session:null,error:t.t0},null===(r=this.refreshingDeferred)||void 0===r||r.resolve(u),t.abrupt("return",u);case 29:throw null===(n=this.refreshingDeferred)||void 0===n||n.reject(t.t0),t.t0;case 31:return t.prev=31,this.refreshingDeferred=null,t.finish(31);case 34:case"end":return t.stop()}}),i,this,[[2,23,31,34]])})))}},{key:"_notifyAllSubscribers",value:function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t}),this.stateChangeEmitters.forEach((function(r){return r.callback(e,t)}))}},{key:"_saveSession",value:function(e){return Ot(this,void 0,void 0,t().mark((function r(){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(this.persistSession||(this.inMemorySession=e),!this.persistSession||!e.expires_at){t.next=4;break}return t.next=4,this._persistSession(e);case 4:case"end":return t.stop()}}),r,this)})))}},{key:"_persistSession",value:function(e){return r=this.storage,n=this.storageKey,i=e,Je(void 0,void 0,void 0,t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.setItem(n,JSON.stringify(i));case 2:case"end":return e.stop()}}),e)})));var r,n,i}},{key:"_removeSession",value:function(){return Ot(this,void 0,void 0,t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.persistSession){e.next=5;break}return e.next=3,Ve(this.storage,this.storageKey);case 3:e.next=6;break;case 5:this.inMemorySession=null;case 6:case"end":return e.stop()}}),e,this)})))}},{key:"_removeVisibilityChangedCallback",value:function(){var e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&He()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){console.error("removing visibilitychange callback failed",t)}}},{key:"_startAutoRefresh",value:function(){return Ot(this,void 0,void 0,t().mark((function e(){var r,n=this;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._stopAutoRefresh();case 2:return r=setInterval((function(){return n._autoRefreshTokenTick()}),jt),this.autoRefreshTicker=r,r&&"object"===typeof r&&"function"===typeof r.unref&&r.unref(),e.next=7,this._autoRefreshTokenTick();case 7:case"end":return e.stop()}}),e,this)})))}},{key:"_stopAutoRefresh",value:function(){return Ot(this,void 0,void 0,t().mark((function e(){var r;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r=this.autoRefreshTicker,this.autoRefreshTicker=null,r&&clearInterval(r);case 3:case"end":return e.stop()}}),e,this)})))}},{key:"startAutoRefresh",value:function(){return Ot(this,void 0,void 0,t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._removeVisibilityChangedCallback(),e.next=3,this._startAutoRefresh();case 3:case"end":return e.stop()}}),e,this)})))}},{key:"stopAutoRefresh",value:function(){return Ot(this,void 0,void 0,t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this._removeVisibilityChangedCallback(),e.next=3,this._stopAutoRefresh();case 3:case"end":return e.stop()}}),e,this)})))}},{key:"_autoRefreshTokenTick",value:function(){return Ot(this,void 0,void 0,t().mark((function e(){var r,n,i;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Date.now(),e.prev=1,e.next=4,this.getSession();case 4:if(n=e.sent,(i=n.data.session)&&i.refresh_token&&i.expires_at){e.next=8;break}return e.abrupt("return");case 8:if(!(Math.floor((1e3*i.expires_at-r)/jt)<3)){e.next=12;break}return e.next=12,this._callRefreshToken(i.refresh_token);case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(1),console.error("Auto refresh tick failed with error. This is likely a transient error.",e.t0);case 17:case"end":return e.stop()}}),e,this,[[1,14]])})))}},{key:"_handleVisibilityChange",value:function(){return Ot(this,void 0,void 0,t().mark((function e(){var r=this;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(He()&&(null===window||void 0===window?void 0:window.addEventListener)){e.next=3;break}return this.autoRefreshToken&&this.startAutoRefresh(),e.abrupt("return",!1);case 3:return e.prev=3,this.visibilityChangedCallback=function(){return Ot(r,void 0,void 0,t().mark((function e(){return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._onVisibilityChanged(!1);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e,this)})))},null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),e.next=8,this._onVisibilityChanged(!0);case 8:e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),console.error("_handleVisibilityChange",e.t0);case 13:case"end":return e.stop()}}),e,this,[[3,10]])})))}},{key:"_onVisibilityChanged",value:function(e){return Ot(this,void 0,void 0,t().mark((function r(){return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if("visible"!==document.visibilityState){t.next=9;break}if(e){t.next=6;break}return t.next=4,this.initializePromise;case 4:return t.next=6,this._recoverAndRefresh();case 6:this.autoRefreshToken&&this._startAutoRefresh(),t.next=10;break;case 9:"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh();case 10:case"end":return t.stop()}}),r,this)})))}},{key:"_getUrlForProvider",value:function(e,t){var r=["provider=".concat(encodeURIComponent(e))];if((null===t||void 0===t?void 0:t.redirectTo)&&r.push("redirect_to=".concat(encodeURIComponent(t.redirectTo))),(null===t||void 0===t?void 0:t.scopes)&&r.push("scopes=".concat(encodeURIComponent(t.scopes))),null===t||void 0===t?void 0:t.queryParams){var n=new URLSearchParams(t.queryParams);r.push(n.toString())}return"".concat(this.url,"/authorize?").concat(r.join("&"))}},{key:"_unenroll",value:function(e){var r;return Ot(this,void 0,void 0,t().mark((function n(){var i,o,s;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.getSession();case 3:if(i=t.sent,o=i.data,!(s=i.error)){t.next=8;break}return t.abrupt("return",{data:null,error:s});case 8:return t.next=10,pt(this.fetch,"DELETE","".concat(this.url,"/factors/").concat(e.factorId),{headers:this.headers,jwt:null===(r=null===o||void 0===o?void 0:o.session)||void 0===r?void 0:r.access_token});case 10:return t.abrupt("return",t.sent);case 13:if(t.prev=13,t.t0=t.catch(0),!et(t.t0)){t.next=17;break}return t.abrupt("return",{data:null,error:t.t0});case 17:throw t.t0;case 18:case"end":return t.stop()}}),n,this,[[0,13]])})))}},{key:"_enroll",value:function(e){var r,n;return Ot(this,void 0,void 0,t().mark((function i(){var o,s,a,c,u,l;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.getSession();case 3:if(o=t.sent,s=o.data,!(a=o.error)){t.next=8;break}return t.abrupt("return",{data:null,error:a});case 8:return t.next=10,pt(this.fetch,"POST","".concat(this.url,"/factors"),{body:{friendly_name:e.friendlyName,factor_type:e.factorType,issuer:e.issuer},headers:this.headers,jwt:null===(r=null===s||void 0===s?void 0:s.session)||void 0===r?void 0:r.access_token});case 10:if(c=t.sent,u=c.data,!(l=c.error)){t.next=15;break}return t.abrupt("return",{data:null,error:l});case 15:return(null===(n=null===u||void 0===u?void 0:u.totp)||void 0===n?void 0:n.qr_code)&&(u.totp.qr_code="data:image/svg+xml;utf-8,".concat(u.totp.qr_code)),t.abrupt("return",{data:u,error:null});case 19:if(t.prev=19,t.t0=t.catch(0),!et(t.t0)){t.next=23;break}return t.abrupt("return",{data:null,error:t.t0});case 23:throw t.t0;case 24:case"end":return t.stop()}}),i,this,[[0,19]])})))}},{key:"_verify",value:function(e){var r;return Ot(this,void 0,void 0,t().mark((function n(){var i,o,s,a,c,u;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.getSession();case 3:if(i=t.sent,o=i.data,!(s=i.error)){t.next=8;break}return t.abrupt("return",{data:null,error:s});case 8:return t.next=10,pt(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/verify"),{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(r=null===o||void 0===o?void 0:o.session)||void 0===r?void 0:r.access_token});case 10:if(a=t.sent,c=a.data,!(u=a.error)){t.next=15;break}return t.abrupt("return",{data:null,error:u});case 15:return t.next=17,this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+c.expires_in},c));case 17:return this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",c),t.abrupt("return",{data:c,error:u});case 21:if(t.prev=21,t.t0=t.catch(0),!et(t.t0)){t.next=25;break}return t.abrupt("return",{data:null,error:t.t0});case 25:throw t.t0;case 26:case"end":return t.stop()}}),n,this,[[0,21]])})))}},{key:"_challenge",value:function(e){var r;return Ot(this,void 0,void 0,t().mark((function n(){var i,o,s;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.getSession();case 3:if(i=t.sent,o=i.data,!(s=i.error)){t.next=8;break}return t.abrupt("return",{data:null,error:s});case 8:return t.next=10,pt(this.fetch,"POST","".concat(this.url,"/factors/").concat(e.factorId,"/challenge"),{headers:this.headers,jwt:null===(r=null===o||void 0===o?void 0:o.session)||void 0===r?void 0:r.access_token});case 10:return t.abrupt("return",t.sent);case 13:if(t.prev=13,t.t0=t.catch(0),!et(t.t0)){t.next=17;break}return t.abrupt("return",{data:null,error:t.t0});case 17:throw t.t0;case 18:case"end":return t.stop()}}),n,this,[[0,13]])})))}},{key:"_challengeAndVerify",value:function(e){return Ot(this,void 0,void 0,t().mark((function r(){var n,i,o;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this._challenge({factorId:e.factorId});case 2:if(n=t.sent,i=n.data,!(o=n.error)){t.next=7;break}return t.abrupt("return",{data:null,error:o});case 7:return t.next=9,this._verify({factorId:e.factorId,challengeId:i.id,code:e.code});case 9:return t.abrupt("return",t.sent);case 10:case"end":return t.stop()}}),r,this)})))}},{key:"_listFactors",value:function(){return Ot(this,void 0,void 0,t().mark((function e(){var r,n,i,o,s;return t().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getUser();case 2:if(r=e.sent,n=r.data.user,!(i=r.error)){e.next=7;break}return e.abrupt("return",{data:null,error:i});case 7:return o=(null===n||void 0===n?void 0:n.factors)||[],s=o.filter((function(e){return"totp"===e.factor_type&&"verified"===e.status})),e.abrupt("return",{data:{all:o,totp:s},error:null});case 10:case"end":return e.stop()}}),e,this)})))}},{key:"_getAuthenticatorAssuranceLevel",value:function(){var e,r;return Ot(this,void 0,void 0,t().mark((function n(){var i,o,s,a,c,u,l;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.getSession();case 2:if(i=t.sent,o=i.data.session,!(s=i.error)){t.next=7;break}return t.abrupt("return",{data:null,error:s});case 7:if(o){t.next=9;break}return t.abrupt("return",{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null});case 9:return a=this._decodeJWT(o.access_token),c=null,a.aal&&(c=a.aal),u=c,(null!==(r=null===(e=o.user.factors)||void 0===e?void 0:e.filter((function(e){return"verified"===e.status})))&&void 0!==r?r:[]).length>0&&(u="aal2"),l=a.amr||[],t.abrupt("return",{data:{currentLevel:c,nextLevel:u,currentAuthenticationMethods:l},error:null});case 17:case"end":return t.stop()}}),n,this)})))}}]),e}(),Rt=function(e){h(r,e);var t=p(r);function r(e){return n(this,r),t.call(this,e)}return s(r)}(Pt),At=function(e,t,r,n){return new(r||(r=Promise))((function(i,o){function s(e){try{c(n.next(e))}catch(t){o(t)}}function a(e){try{c(n.throw(e))}catch(t){o(t)}}function c(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(s,a)}c((n=n.apply(e,t||[])).next())}))},Ct={headers:Ne},It={schema:"public"},Lt={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0},Ut={},Dt=function(){function e(t,r,i){var o,s,a,c,u,l,h,f;if(n(this,e),this.supabaseUrl=t,this.supabaseKey=r,!t)throw new Error("supabaseUrl is required.");if(!r)throw new Error("supabaseKey is required.");var d=t.replace(/\/$/,"");if(this.realtimeUrl="".concat(d,"/realtime/v1").replace(/^http/i,"ws"),this.authUrl="".concat(d,"/auth/v1"),this.storageUrl="".concat(d,"/storage/v1"),d.match(/(supabase\.co)|(supabase\.in)/)){var p=d.split(".");this.functionsUrl="".concat(p[0],".functions.").concat(p[1],".").concat(p[2])}else this.functionsUrl="".concat(d,"/functions/v1");var v="sb-".concat(new URL(this.authUrl).hostname.split(".")[0],"-auth-token"),y=function(e,t){var r=e.db,n=e.auth,i=e.realtime,o=e.global,s=t.db,a=t.auth,c=t.realtime,u=t.global;return{db:Object.assign(Object.assign({},s),r),auth:Object.assign(Object.assign({},a),n),realtime:Object.assign(Object.assign({},c),i),global:Object.assign(Object.assign({},u),o)}}(null!==i&&void 0!==i?i:{},{db:It,realtime:Ut,auth:Object.assign(Object.assign({},Lt),{storageKey:v}),global:Ct});this.storageKey=null!==(s=null===(o=y.auth)||void 0===o?void 0:o.storageKey)&&void 0!==s?s:"",this.headers=null!==(c=null===(a=y.global)||void 0===a?void 0:a.headers)&&void 0!==c?c:{},this.auth=this._initSupabaseAuthClient(null!==(u=y.auth)&&void 0!==u?u:{},this.headers,null===(l=y.global)||void 0===l?void 0:l.fetch),this.fetch=Me(r,this._getAccessToken.bind(this),null===(h=y.global)||void 0===h?void 0:h.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},y.realtime)),this.rest=new J("".concat(d,"/rest/v1"),{headers:this.headers,schema:null===(f=y.db)||void 0===f?void 0:f.schema,fetch:this.fetch}),this._listenForAuthEvents()}return s(e,[{key:"functions",get:function(){return new x(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}},{key:"storage",get:function(){return new De(this.storageUrl,this.headers,this.fetch)}},{key:"from",value:function(e){return this.rest.from(e)}},{key:"rpc",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return this.rest.rpc(e,t,r)}},{key:"channel",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{config:{}};return this.realtime.channel(e,t)}},{key:"getChannels",value:function(){return this.realtime.getChannels()}},{key:"removeChannel",value:function(e){return this.realtime.removeChannel(e)}},{key:"removeAllChannels",value:function(){return this.realtime.removeAllChannels()}},{key:"_getAccessToken",value:function(){var e,r;return At(this,void 0,void 0,t().mark((function n(){var i,o;return t().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.auth.getSession();case 2:return i=t.sent,o=i.data,t.abrupt("return",null!==(r=null===(e=o.session)||void 0===e?void 0:e.access_token)&&void 0!==r?r:null);case 5:case"end":return t.stop()}}),n,this)})))}},{key:"_initSupabaseAuthClient",value:function(e,t,r){var n=e.autoRefreshToken,i=e.persistSession,o=e.detectSessionInUrl,s=e.storage,a=e.storageKey,c={Authorization:"Bearer ".concat(this.supabaseKey),apikey:"".concat(this.supabaseKey)};return new Rt({url:this.authUrl,headers:Object.assign(Object.assign({},c),t),storageKey:a,autoRefreshToken:n,persistSession:i,detectSessionInUrl:o,storage:s,fetch:r})}},{key:"_initRealtimeClient",value:function(e){return new de(this.realtimeUrl,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null===e||void 0===e?void 0:e.params)}))}},{key:"_listenForAuthEvents",value:function(){var e=this;return this.auth.onAuthStateChange((function(t,r){e._handleTokenChanged(t,null===r||void 0===r?void 0:r.access_token,"CLIENT")}))}},{key:"_handleTokenChanged",value:function(e,t,r){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===t?"SIGNED_OUT"!==e&&"USER_DELETED"!==e||(this.realtime.setAuth(this.supabaseKey),"STORAGE"==r&&this.auth.signOut(),this.changedAccessToken=void 0):(this.realtime.setAuth(null!==t&&void 0!==t?t:null),this.changedAccessToken=t)}}]),e}();(function(e,t,r){new Dt(e,t,r)})({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SUPABASE_URL,{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_SUPABASE_ANON_KEY),r(184)}()}();
//# sourceMappingURL=main.2b5fa123.js.map